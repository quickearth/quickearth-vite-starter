define(["exports","./Cartesian2-716c2715","./Check-d18af7c4","./when-208fe5b0","./Math-3ba16bed","./RuntimeError-7f634f5d"],function(e,S,N,T,F,V){"use strict";function t(e){this._ellipsoid=T.defaultValue(e,S.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(t.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),t.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,r=e.latitude*r,e=e.height;return T.defined(t)?(t.x=n,t.y=r,t.z=e,t):new S.Cartesian3(n,r,e)},t.prototype.unproject=function(e,t){if(!T.defined(e))throw new N.DeveloperError("cartesian is required");var r=this._oneOverSemimajorAxis,n=e.x*r,r=e.y*r,e=e.z;return T.defined(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new S.Cartographic(n,r,e)};var a=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function i(e,t){this.start=T.defaultValue(e,0),this.stop=T.defaultValue(t,0)}function L(e,t,r,n,a,i,o,s,u){this[0]=T.defaultValue(e,0),this[1]=T.defaultValue(n,0),this[2]=T.defaultValue(o,0),this[3]=T.defaultValue(t,0),this[4]=T.defaultValue(a,0),this[5]=T.defaultValue(s,0),this[6]=T.defaultValue(r,0),this[7]=T.defaultValue(i,0),this[8]=T.defaultValue(u,0)}L.packedLength=9,L.pack=function(e,t,r){return N.Check.typeOf.object("value",e),N.Check.defined("array",t),r=T.defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},L.unpack=function(e,t,r){return N.Check.defined("array",e),t=T.defaultValue(t,0),(r=!T.defined(r)?new L:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},L.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new L(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},L.fromArray=function(e,t,r){return N.Check.defined("array",e),t=T.defaultValue(t,0),(r=!T.defined(r)?new L:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},L.fromColumnMajorArray=function(e,t){return N.Check.defined("values",e),L.clone(e,t)},L.fromRowMajorArray=function(e,t){return N.Check.defined("values",e),T.defined(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new L(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},L.fromQuaternion=function(e,t){N.Check.typeOf.object("quaternion",e);var r=e.x*e.x,n=e.x*e.y,a=e.x*e.z,i=e.x*e.w,o=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,f=e.w*e.w,d=r-o-c+f,h=2*(n-l),p=2*(a+u),e=2*(n+l),n=o-r-c+f,l=2*(s-i),u=2*(a-u),i=2*(s+i),f=-r-o+c+f;return T.defined(t)?(t[0]=d,t[1]=e,t[2]=u,t[3]=h,t[4]=n,t[5]=i,t[6]=p,t[7]=l,t[8]=f,t):new L(d,h,p,e,n,l,u,i,f)},L.fromHeadingPitchRoll=function(e,t){N.Check.typeOf.object("headingPitchRoll",e);var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),a=Math.cos(e.roll),i=Math.sin(-e.pitch),o=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-a*o+s*i*n,l=s*o+a*i*n,f=r*o,e=a*n+s*i*o,o=-s*n+a*i*o,i=-i,s=s*r,r=a*r;return T.defined(t)?(t[0]=u,t[1]=f,t[2]=i,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=o,t[8]=r,t):new L(u,c,l,f,e,o,i,s,r)},L.fromScale=function(e,t){return N.Check.typeOf.object("scale",e),T.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new L(e.x,0,0,0,e.y,0,0,0,e.z)},L.fromUniformScale=function(e,t){return N.Check.typeOf.number("scale",e),T.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new L(e,0,0,0,e,0,0,0,e)},L.fromCrossProduct=function(e,t){return N.Check.typeOf.object("vector",e),T.defined(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new L(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},L.fromRotationX=function(e,t){N.Check.typeOf.number("angle",e);var r=Math.cos(e),e=Math.sin(e);return T.defined(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=e,t[6]=0,t[7]=-e,t[8]=r,t):new L(1,0,0,0,r,-e,0,e,r)},L.fromRotationY=function(e,t){N.Check.typeOf.number("angle",e);var r=Math.cos(e),e=Math.sin(e);return T.defined(t)?(t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=r,t):new L(r,0,e,0,1,0,-e,0,r)},L.fromRotationZ=function(e,t){N.Check.typeOf.number("angle",e);var r=Math.cos(e),e=Math.sin(e);return T.defined(t)?(t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new L(r,-e,0,e,r,0,0,0,1)},L.toArray=function(e,t){return N.Check.typeOf.object("matrix",e),T.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},L.getElementIndex=function(e,t){return N.Check.typeOf.number.greaterThanOrEquals("row",t,0),N.Check.typeOf.number.lessThanOrEquals("row",t,2),N.Check.typeOf.number.greaterThanOrEquals("column",e,0),N.Check.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},L.getColumn=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,2),N.Check.typeOf.object("result",r);var n=3*t,a=e[n],t=e[1+n],n=e[2+n];return r.x=a,r.y=t,r.z=n,r},L.setColumn=function(e,t,r,n){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,2),N.Check.typeOf.object("cartesian",r),N.Check.typeOf.object("result",n);t*=3;return(n=L.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n},L.getRow=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,2),N.Check.typeOf.object("result",r);var n=e[t],a=e[t+3],t=e[t+6];return r.x=n,r.y=a,r.z=t,r},L.setRow=function(e,t,r,n){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,2),N.Check.typeOf.object("cartesian",r),N.Check.typeOf.object("result",n),(n=L.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var r=new S.Cartesian3;L.getScale=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t.x=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[0],e[1],e[2],r)),t.y=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[3],e[4],e[5],r)),t.z=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[6],e[7],e[8],r)),t};var n=new S.Cartesian3;L.getMaximumScale=function(e){return L.getScale(e,n),S.Cartesian3.maximumComponent(n)},L.multiply=function(e,t,r){N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r);var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=t,r},L.add=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},L.subtract=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},L.multiplyByVector=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("cartesian",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[3]*a+e[6]*i,t=e[1]*n+e[4]*a+e[7]*i,i=e[2]*n+e[5]*a+e[8]*i;return r.x=o,r.y=t,r.z=i,r},L.multiplyByScalar=function(e,t,r){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},L.multiplyByScale=function(e,t,r){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("scale",t),N.Check.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},L.negate=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},L.transpose=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=e[0],n=e[3],a=e[6],i=e[1],o=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=r,t[1]=n,t[2]=a,t[3]=i,t[4]=o,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var o=new S.Cartesian3(1,1,1);L.getRotation=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=S.Cartesian3.divideComponents(o,L.getScale(e,n),n);return t=L.multiplyByScale(e,r,t)};var f=[1,0,0],d=[2,2,1];var u=new L,c=new L;L.computeEigenDecomposition=function(e,t){N.Check.typeOf.object("matrix",e);for(var r=F.CesiumMath.EPSILON20,n=0,a=0,i=(t=!T.defined(t)?{}:t).unitary=L.clone(L.IDENTITY,t.unitary),o=t.diagonal=L.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(o);a<10&&function(e){for(var t=0,r=0;r<3;++r){var n=e[L.getElementIndex(d[r],f[r])];t+=2*n*n}return Math.sqrt(t)}(o)>s;)!function(e,t){for(var r=F.CesiumMath.EPSILON15,n=0,a=1,i=0;i<3;++i){var o=Math.abs(e[L.getElementIndex(d[i],f[i])]);n<o&&(a=i,n=o)}var s=1,u=0,c=f[a],l=d[a];Math.abs(e[L.getElementIndex(l,c)])>r&&(u=(r=(r=(e[L.getElementIndex(l,l)]-e[L.getElementIndex(c,c)])/2/e[L.getElementIndex(l,c)])<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*(s=1/Math.sqrt(1+r*r))),(t=L.clone(L.IDENTITY,t))[L.getElementIndex(c,c)]=t[L.getElementIndex(l,l)]=s,t[L.getElementIndex(l,c)]=u,t[L.getElementIndex(c,l)]=-u}(o,u),L.transpose(u,c),L.multiply(o,u,o),L.multiply(c,o,o),L.multiply(i,u,i),2<++n&&(++a,n=0);return t},L.abs=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},L.determinant=function(e){N.Check.typeOf.object("matrix",e);var t=e[0],r=e[3],n=e[6],a=e[1],i=e[4],o=e[7],s=e[2],u=e[5],e=e[8];return t*(i*e-u*o)+a*(u*n-r*e)+s*(r*o-i*n)},L.inverse=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=L.determinant(e);if(Math.abs(e)<=F.CesiumMath.EPSILON15)throw new N.DeveloperError("matrix is not invertible");return t[0]=o*l-c*s,t[1]=c*a-n*l,t[2]=n*s-o*a,t[3]=u*s-i*l,t[4]=r*l-u*a,t[5]=i*a-r*s,t[6]=i*c-u*o,t[7]=u*n-r*c,t[8]=r*o-i*n,L.multiplyByScalar(t,1/e,t)};var s=new L;function B(e,t,r,n){this.x=T.defaultValue(e,0),this.y=T.defaultValue(t,0),this.z=T.defaultValue(r,0),this.w=T.defaultValue(n,0)}L.inverseTranspose=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),L.inverse(L.transpose(e,s),t)},L.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},L.equalsEpsilon=function(e,t,r){return r=T.defaultValue(r,0),e===t||T.defined(e)&&T.defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},L.IDENTITY=Object.freeze(new L(1,0,0,0,1,0,0,0,1)),L.ZERO=Object.freeze(new L(0,0,0,0,0,0,0,0,0)),L.COLUMN0ROW0=0,L.COLUMN0ROW1=1,L.COLUMN0ROW2=2,L.COLUMN1ROW0=3,L.COLUMN1ROW1=4,L.COLUMN1ROW2=5,L.COLUMN2ROW0=6,L.COLUMN2ROW1=7,L.COLUMN2ROW2=8,Object.defineProperties(L.prototype,{length:{get:function(){return L.packedLength}}}),L.prototype.clone=function(e){return L.clone(this,e)},L.prototype.equals=function(e){return L.equals(this,e)},L.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},L.prototype.equalsEpsilon=function(e,t){return L.equalsEpsilon(this,e,t)},L.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},B.fromElements=function(e,t,r,n,a){return T.defined(a)?(a.x=e,a.y=t,a.z=r,a.w=n,a):new B(e,t,r,n)},B.fromColor=function(e,t){return N.Check.typeOf.object("color",e),T.defined(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new B(e.red,e.green,e.blue,e.alpha)},B.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new B(e.x,e.y,e.z,e.w)},B.packedLength=4,B.pack=function(e,t,r){return N.Check.typeOf.object("value",e),N.Check.defined("array",t),r=T.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},B.unpack=function(e,t,r){return N.Check.defined("array",e),t=T.defaultValue(t,0),(r=!T.defined(r)?new B:r).x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},B.packArray=function(e,t){N.Check.defined("array",e);var r=e.length,n=4*r;if(T.defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new N.DeveloperError("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var a=0;a<r;++a)B.pack(e[a],t,4*a);return t},B.unpackArray=function(e,t){if(N.Check.defined("array",e),N.Check.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new N.DeveloperError("array length must be a multiple of 4.");var r=e.length;T.defined(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var a=n/4;t[a]=B.unpack(e,n,t[a])}return t},B.fromArray=B.unpack,B.maximumComponent=function(e){return N.Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},B.minimumComponent=function(e){return N.Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},B.minimumByComponent=function(e,t,r){return N.Check.typeOf.object("first",e),N.Check.typeOf.object("second",t),N.Check.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},B.maximumByComponent=function(e,t,r){return N.Check.typeOf.object("first",e),N.Check.typeOf.object("second",t),N.Check.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},B.magnitudeSquared=function(e){return N.Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},B.magnitude=function(e){return Math.sqrt(B.magnitudeSquared(e))};var l=new B;B.distance=function(e,t){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),B.subtract(e,t,l),B.magnitude(l)},B.distanceSquared=function(e,t){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),B.subtract(e,t,l),B.magnitudeSquared(l)},B.normalize=function(e,t){N.Check.typeOf.object("cartesian",e),N.Check.typeOf.object("result",t);var r=B.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new N.DeveloperError("normalized result is not a number");return t},B.dot=function(e,t){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},B.multiplyComponents=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},B.divideComponents=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},B.add=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},B.subtract=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},B.multiplyByScalar=function(e,t,r){return N.Check.typeOf.object("cartesian",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},B.divideByScalar=function(e,t,r){return N.Check.typeOf.object("cartesian",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},B.negate=function(e,t){return N.Check.typeOf.object("cartesian",e),N.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},B.abs=function(e,t){return N.Check.typeOf.object("cartesian",e),N.Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var h=new B;B.lerp=function(e,t,r,n){return N.Check.typeOf.object("start",e),N.Check.typeOf.object("end",t),N.Check.typeOf.number("t",r),N.Check.typeOf.object("result",n),B.multiplyByScalar(t,r,h),n=B.multiplyByScalar(e,1-r,n),B.add(h,n,n)};var p=new B;B.mostOrthogonalAxis=function(e,t){N.Check.typeOf.object("cartesian",e),N.Check.typeOf.object("result",t);e=B.normalize(e,p);return B.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?B.clone(B.UNIT_X,t):B.clone(B.UNIT_W,t):e.z<=e.w?B.clone(B.UNIT_Z,t):B.clone(B.UNIT_W,t):e.y<=e.z?e.y<=e.w?B.clone(B.UNIT_Y,t):B.clone(B.UNIT_W,t):e.z<=e.w?B.clone(B.UNIT_Z,t):B.clone(B.UNIT_W,t)},B.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},B.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},B.equalsEpsilon=function(e,t,r,n){return e===t||T.defined(e)&&T.defined(t)&&F.CesiumMath.equalsEpsilon(e.x,t.x,r,n)&&F.CesiumMath.equalsEpsilon(e.y,t.y,r,n)&&F.CesiumMath.equalsEpsilon(e.z,t.z,r,n)&&F.CesiumMath.equalsEpsilon(e.w,t.w,r,n)},B.ZERO=Object.freeze(new B(0,0,0,0)),B.UNIT_X=Object.freeze(new B(1,0,0,0)),B.UNIT_Y=Object.freeze(new B(0,1,0,0)),B.UNIT_Z=Object.freeze(new B(0,0,1,0)),B.UNIT_W=Object.freeze(new B(0,0,0,1)),B.prototype.clone=function(e){return B.clone(this,e)},B.prototype.equals=function(e){return B.equals(this,e)},B.prototype.equalsEpsilon=function(e,t,r){return B.equalsEpsilon(this,e,t,r)},B.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var y=new Float32Array(1),m=new Uint8Array(y.buffer),C=new Uint32Array([287454020]),w=68===new Uint8Array(C.buffer)[0];function W(e,t,r,n,a,i,o,s,u,c,l,f,d,h,p,y){this[0]=T.defaultValue(e,0),this[1]=T.defaultValue(a,0),this[2]=T.defaultValue(u,0),this[3]=T.defaultValue(d,0),this[4]=T.defaultValue(t,0),this[5]=T.defaultValue(i,0),this[6]=T.defaultValue(c,0),this[7]=T.defaultValue(h,0),this[8]=T.defaultValue(r,0),this[9]=T.defaultValue(o,0),this[10]=T.defaultValue(l,0),this[11]=T.defaultValue(p,0),this[12]=T.defaultValue(n,0),this[13]=T.defaultValue(s,0),this[14]=T.defaultValue(f,0),this[15]=T.defaultValue(y,0)}B.packFloat=function(e,t){return N.Check.typeOf.number("value",e),T.defined(t)||(t=new B),y[0]=e,w?(t.x=m[0],t.y=m[1],t.z=m[2],t.w=m[3]):(t.x=m[3],t.y=m[2],t.z=m[1],t.w=m[0]),t},B.unpackFloat=function(e){return N.Check.typeOf.object("packedFloat",e),w?(m[0]=e.x,m[1]=e.y,m[2]=e.z,m[3]=e.w):(m[0]=e.w,m[1]=e.z,m[2]=e.y,m[3]=e.x),y[0]},W.packedLength=16,W.pack=function(e,t,r){return N.Check.typeOf.object("value",e),N.Check.defined("array",t),r=T.defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},W.unpack=function(e,t,r){return N.Check.defined("array",e),t=T.defaultValue(t,0),(r=!T.defined(r)?new W:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},W.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new W(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},W.fromArray=W.unpack,W.fromColumnMajorArray=function(e,t){return N.Check.defined("values",e),W.clone(e,t)},W.fromRowMajorArray=function(e,t){return N.Check.defined("values",e),T.defined(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new W(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},W.fromRotationTranslation=function(e,t,r){return N.Check.typeOf.object("rotation",e),t=T.defaultValue(t,S.Cartesian3.ZERO),T.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new W(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},W.fromTranslationQuaternionRotationScale=function(e,t,r,n){N.Check.typeOf.object("translation",e),N.Check.typeOf.object("rotation",t),N.Check.typeOf.object("scale",r),T.defined(n)||(n=new W);var a=r.x,i=r.y,o=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,f=t.y*t.y,d=t.y*t.z,h=t.y*t.w,p=t.z*t.z,y=t.z*t.w,m=t.w*t.w,C=2*(u-y),r=2*(c+h),t=2*(u+y),u=f-s-p+m,y=2*(d-l),h=2*(c-h),d=2*(d+l),l=-s-f+p+m;return n[0]=(s-f-p+m)*a,n[1]=t*a,n[2]=h*a,n[3]=0,n[4]=C*i,n[5]=u*i,n[6]=d*i,n[7]=0,n[8]=r*o,n[9]=y*o,n[10]=l*o,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},W.fromTranslationRotationScale=function(e,t){return N.Check.typeOf.object("translationRotationScale",e),W.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},W.fromTranslation=function(e,t){return N.Check.typeOf.object("translation",e),W.fromRotationTranslation(L.IDENTITY,e,t)},W.fromScale=function(e,t){return N.Check.typeOf.object("scale",e),T.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new W(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},W.fromUniformScale=function(e,t){return N.Check.typeOf.number("scale",e),T.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new W(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var O=new S.Cartesian3,b=new S.Cartesian3,v=new S.Cartesian3;W.fromCamera=function(e,t){N.Check.typeOf.object("camera",e);var r=e.position,n=e.direction,a=e.up;N.Check.typeOf.object("camera.position",r),N.Check.typeOf.object("camera.direction",n),N.Check.typeOf.object("camera.up",a),S.Cartesian3.normalize(n,O),S.Cartesian3.normalize(S.Cartesian3.cross(O,a,b),b),S.Cartesian3.normalize(S.Cartesian3.cross(b,O,v),v);var i=b.x,o=b.y,s=b.z,u=O.x,c=O.y,l=O.z,f=v.x,d=v.y,h=v.z,p=r.x,e=r.y,n=r.z,a=i*-p+o*-e+s*-n,r=f*-p+d*-e+h*-n,n=u*p+c*e+l*n;return T.defined(t)?(t[0]=i,t[1]=f,t[2]=-u,t[3]=0,t[4]=o,t[5]=d,t[6]=-c,t[7]=0,t[8]=s,t[9]=h,t[10]=-l,t[11]=0,t[12]=a,t[13]=r,t[14]=n,t[15]=1,t):new W(i,o,s,a,f,d,h,r,-u,-c,-l,n,0,0,0,1)},W.computePerspectiveFieldOfView=function(e,t,r,n,a){N.Check.typeOf.number.greaterThan("fovY",e,0),N.Check.typeOf.number.lessThan("fovY",e,Math.PI),N.Check.typeOf.number.greaterThan("near",r,0),N.Check.typeOf.number.greaterThan("far",n,0),N.Check.typeOf.object("result",a);var i=1/Math.tan(.5*e),e=(n+r)/(r-n),n=2*n*r/(r-n);return a[0]=i/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=e,a[11]=-1,a[12]=0,a[13]=0,a[14]=n,a[15]=0,a},W.computeOrthographicOffCenter=function(e,t,r,n,a,i,o){N.Check.typeOf.number("left",e),N.Check.typeOf.number("right",t),N.Check.typeOf.number("bottom",r),N.Check.typeOf.number("top",n),N.Check.typeOf.number("near",a),N.Check.typeOf.number("far",i),N.Check.typeOf.object("result",o);var s=1/(t-e),u=1/(n-r),c=1/(i-a),e=-(t+e)*s,r=-(n+r)*u,a=-(i+a)*c;return u*=2,c*=-2,o[0]=s*=2,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=0,o[12]=e,o[13]=r,o[14]=a,o[15]=1,o},W.computePerspectiveOffCenter=function(e,t,r,n,a,i,o){N.Check.typeOf.number("left",e),N.Check.typeOf.number("right",t),N.Check.typeOf.number("bottom",r),N.Check.typeOf.number("top",n),N.Check.typeOf.number("near",a),N.Check.typeOf.number("far",i),N.Check.typeOf.object("result",o);var s=2*a/(n-r),u=(t+e)/(t-e),n=(n+r)/(n-r),r=-(i+a)/(i-a),i=-2*i*a/(i-a);return o[0]=2*a/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=u,o[9]=n,o[10]=r,o[11]=-1,o[12]=0,o[13]=0,o[14]=i,o[15]=0,o},W.computeInfinitePerspectiveOffCenter=function(e,t,r,n,a,i){N.Check.typeOf.number("left",e),N.Check.typeOf.number("right",t),N.Check.typeOf.number("bottom",r),N.Check.typeOf.number("top",n),N.Check.typeOf.number("near",a),N.Check.typeOf.object("result",i);var o=2*a/(n-r),s=(t+e)/(t-e),n=(n+r)/(n-r),r=-2*a;return i[0]=2*a/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=s,i[9]=n,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=r,i[15]=0,i},W.computeViewportTransformation=function(e,t,r,n){T.defined(n)||(n=new W),e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT);var a=T.defaultValue(e.x,0),i=T.defaultValue(e.y,0),o=T.defaultValue(e.width,0),s=T.defaultValue(e.height,0);t=T.defaultValue(t,0);var u=.5*o,e=.5*s,o=.5*((r=T.defaultValue(r,1))-t),s=e,r=o,a=a+u,e=i+e,o=t+o;return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=a,n[13]=e,n[14]=o,n[15]=1,n},W.computeView=function(e,t,r,n,a){return N.Check.typeOf.object("position",e),N.Check.typeOf.object("direction",t),N.Check.typeOf.object("up",r),N.Check.typeOf.object("right",n),N.Check.typeOf.object("result",a),a[0]=n.x,a[1]=r.x,a[2]=-t.x,a[3]=0,a[4]=n.y,a[5]=r.y,a[6]=-t.y,a[7]=0,a[8]=n.z,a[9]=r.z,a[10]=-t.z,a[11]=0,a[12]=-S.Cartesian3.dot(n,e),a[13]=-S.Cartesian3.dot(r,e),a[14]=S.Cartesian3.dot(t,e),a[15]=1,a},W.toArray=function(e,t){return N.Check.typeOf.object("matrix",e),T.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},W.getElementIndex=function(e,t){return N.Check.typeOf.number.greaterThanOrEquals("row",t,0),N.Check.typeOf.number.lessThanOrEquals("row",t,3),N.Check.typeOf.number.greaterThanOrEquals("column",e,0),N.Check.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},W.getColumn=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,3),N.Check.typeOf.object("result",r);var n=4*t,a=e[n],i=e[1+n],t=e[2+n],n=e[3+n];return r.x=a,r.y=i,r.z=t,r.w=n,r},W.setColumn=function(e,t,r,n){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,3),N.Check.typeOf.object("cartesian",r),N.Check.typeOf.object("result",n);t*=4;return(n=W.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n[3+t]=r.w,n},W.setTranslation=function(e,t,r){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("translation",t),N.Check.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var g=new S.Cartesian3;W.setScale=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("scale",t),N.Check.typeOf.object("result",r);var n=W.getScale(e,g),n=S.Cartesian3.divideComponents(t,n,g);return W.multiplyByScale(e,n,r)},W.getRow=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,3),N.Check.typeOf.object("result",r);var n=e[t],a=e[t+4],i=e[t+8],t=e[t+12];return r.x=n,r.y=a,r.z=i,r.w=t,r},W.setRow=function(e,t,r,n){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.number.greaterThanOrEquals("index",t,0),N.Check.typeOf.number.lessThanOrEquals("index",t,3),N.Check.typeOf.object("cartesian",r),N.Check.typeOf.object("result",n),(n=W.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var x=new S.Cartesian3;W.getScale=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t.x=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[0],e[1],e[2],x)),t.y=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[4],e[5],e[6],x)),t.z=S.Cartesian3.magnitude(S.Cartesian3.fromElements(e[8],e[9],e[10],x)),t};var E=new S.Cartesian3;W.getMaximumScale=function(e){return W.getScale(e,E),S.Cartesian3.maximumComponent(E)},W.multiply=function(e,t,r){N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],y=e[12],m=e[13],C=e[14],w=e[15],O=t[0],b=t[1],v=t[2],g=t[3],x=t[4],E=t[5],k=t[6],q=t[7],j=t[8],_=t[9],S=t[10],T=t[11],M=t[12],R=t[13],D=t[14],A=t[15],z=a*O+u*b+d*v+m*g,I=i*O+c*b+h*v+C*g,P=o*O+l*b+p*v+w*g,U=n*x+s*E+f*k+y*q,e=a*x+u*E+d*k+m*q,t=i*x+c*E+h*k+C*q,x=o*x+l*E+p*k+w*q,E=n*j+s*_+f*S+y*T,k=a*j+u*_+d*S+m*T,q=i*j+c*_+h*S+C*T,S=o*j+l*_+p*S+w*T,T=n*M+s*R+f*D+y*A,m=a*M+u*R+d*D+m*A,C=i*M+c*R+h*D+C*A,A=o*M+l*R+p*D+w*A;return r[0]=n*O+s*b+f*v+y*g,r[1]=z,r[2]=I,r[3]=P,r[4]=U,r[5]=e,r[6]=t,r[7]=x,r[8]=E,r[9]=k,r[10]=q,r[11]=S,r[12]=T,r[13]=m,r[14]=C,r[15]=A,r},W.add=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},W.subtract=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},W.multiplyTransformation=function(e,t,r){N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],d=e[12],h=e[13],p=e[14],y=t[0],m=t[1],C=t[2],w=t[4],O=t[5],b=t[6],v=t[8],g=t[9],x=t[10],E=t[12],k=t[13],q=t[14],j=a*y+s*m+l*C,_=i*y+u*m+f*C,e=n*w+o*O+c*b,t=a*w+s*O+l*b,w=i*w+u*O+f*b,O=n*v+o*g+c*x,b=a*v+s*g+l*x,x=i*v+u*g+f*x,d=n*E+o*k+c*q+d,h=a*E+s*k+l*q+h,p=i*E+u*k+f*q+p;return r[0]=n*y+o*m+c*C,r[1]=j,r[2]=_,r[3]=0,r[4]=e,r[5]=t,r[6]=w,r[7]=0,r[8]=O,r[9]=b,r[10]=x,r[11]=0,r[12]=d,r[13]=h,r[14]=p,r[15]=1,r},W.multiplyByMatrix3=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("rotation",t),N.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],d=t[0],h=t[1],p=t[2],y=t[3],m=t[4],C=t[5],w=t[6],O=t[7],b=t[8],v=a*d+s*h+l*p,g=i*d+u*h+f*p,x=n*y+o*m+c*C,t=a*y+s*m+l*C,m=i*y+u*m+f*C,C=n*w+o*O+c*b,l=a*w+s*O+l*b,b=i*w+u*O+f*b;return r[0]=n*d+o*h+c*p,r[1]=v,r[2]=g,r[3]=0,r[4]=x,r[5]=t,r[6]=m,r[7]=0,r[8]=C,r[9]=l,r[10]=b,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},W.multiplyByTranslation=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("translation",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=n*e[0]+a*e[4]+i*e[8]+e[12],t=n*e[1]+a*e[5]+i*e[9]+e[13],i=n*e[2]+a*e[6]+i*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=t,r[14]=i,r[15]=e[15],r};var k=new S.Cartesian3;W.multiplyByUniformScale=function(e,t,r){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.number("scale",t),N.Check.typeOf.object("result",r),k.x=t,k.y=t,k.z=t,W.multiplyByScale(e,k,r)},W.multiplyByScale=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("scale",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,t=t.z;return 1===n&&1===a&&1===t?W.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},W.multiplyByVector=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("cartesian",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=t.w,s=e[0]*n+e[4]*a+e[8]*i+e[12]*o,u=e[1]*n+e[5]*a+e[9]*i+e[13]*o,t=e[2]*n+e[6]*a+e[10]*i+e[14]*o,o=e[3]*n+e[7]*a+e[11]*i+e[15]*o;return r.x=s,r.y=u,r.z=t,r.w=o,r},W.multiplyByPointAsVector=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("cartesian",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i,t=e[1]*n+e[5]*a+e[9]*i,i=e[2]*n+e[6]*a+e[10]*i;return r.x=o,r.y=t,r.z=i,r},W.multiplyByPoint=function(e,t,r){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("cartesian",t),N.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i+e[12],t=e[1]*n+e[5]*a+e[9]*i+e[13],e=e[2]*n+e[6]*a+e[10]*i+e[14];return r.x=o,r.y=t,r.z=e,r},W.multiplyByScalar=function(e,t,r){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},W.negate=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},W.transpose=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=o,t[14]=s,t[15]=e[15],t},W.abs=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},W.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},W.equalsEpsilon=function(e,t,r){return r=T.defaultValue(r,0),e===t||T.defined(e)&&T.defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},W.getTranslation=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},W.getMatrix3=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var Y=new L,H=new L,Z=new B,X=new B(0,0,0,1);W.inverse=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=e[0],n=e[4],a=e[8],i=e[12],o=e[1],s=e[5],u=e[9],c=e[13],l=e[2],f=e[6],d=e[10],h=e[14],p=e[3],y=e[7],m=e[11],C=e[15],w=d*C,O=h*m,b=f*C,v=h*y,g=f*m,x=d*y,E=l*C,k=h*p,q=l*m,j=d*p,_=l*y,S=f*p,T=w*s+v*u+g*c-(O*s+b*u+x*c),M=O*o+E*u+j*c-(w*o+k*u+q*c),R=b*o+k*s+_*c-(v*o+E*s+S*c),D=x*o+q*s+S*u-(g*o+j*s+_*u),A=O*n+b*a+x*i-(w*n+v*a+g*i),z=w*r+k*a+q*i-(O*r+E*a+j*i),I=v*r+E*n+S*i-(b*r+k*n+_*i),P=g*r+j*n+_*a-(x*r+q*n+S*a),U=(w=a*c)*y+(v=i*s)*m+(g=n*u)*C-((O=i*u)*y+(b=n*c)*m+(x=a*s)*C),u=O*p+(E=r*c)*m+(j=a*o)*C-(w*p+(k=i*o)*m+(q=r*u)*C),C=b*p+k*y+(_=r*s)*C-(v*p+E*y+(S=n*o)*C),y=x*p+q*y+S*m-(g*p+j*y+_*m),m=b*d+x*h+O*f-(g*h+w*f+v*d),O=q*h+w*l+k*d-(E*d+j*h+O*l),k=E*f+S*h+v*l-(_*h+b*l+k*f),l=_*d+g*l+j*f-(q*f+S*d+x*l),i=r*T+n*M+a*R+i*D;if(Math.abs(i)<F.CesiumMath.EPSILON21){if(L.equalsEpsilon(W.getMatrix3(e,Y),H,F.CesiumMath.EPSILON7)&&B.equals(W.getRow(e,3,Z),X))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new V.RuntimeError("matrix is not invertible because its determinate is zero.")}return t[0]=T*(i=1/i),t[1]=M*i,t[2]=R*i,t[3]=D*i,t[4]=A*i,t[5]=z*i,t[6]=I*i,t[7]=P*i,t[8]=U*i,t[9]=u*i,t[10]=C*i,t[11]=y*i,t[12]=m*i,t[13]=O*i,t[14]=k*i,t[15]=l*i,t},W.inverseTransformation=function(e,t){N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t);var r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10],f=e[12],d=e[13],h=e[14],p=-r*f-n*d-a*h,e=-i*f-o*d-s*h,h=-u*f-c*d-l*h;return t[0]=r,t[1]=i,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=c,t[7]=0,t[8]=a,t[9]=s,t[10]=l,t[11]=0,t[12]=p,t[13]=e,t[14]=h,t[15]=1,t};var q=new W;function M(e,t){this.center=S.Cartesian3.clone(T.defaultValue(e,S.Cartesian3.ZERO)),this.radius=T.defaultValue(t,0)}W.inverseTranspose=function(e,t){return N.Check.typeOf.object("matrix",e),N.Check.typeOf.object("result",t),W.inverse(W.transpose(e,q),t)},W.IDENTITY=Object.freeze(new W(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),W.ZERO=Object.freeze(new W(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),W.COLUMN0ROW0=0,W.COLUMN0ROW1=1,W.COLUMN0ROW2=2,W.COLUMN0ROW3=3,W.COLUMN1ROW0=4,W.COLUMN1ROW1=5,W.COLUMN1ROW2=6,W.COLUMN1ROW3=7,W.COLUMN2ROW0=8,W.COLUMN2ROW1=9,W.COLUMN2ROW2=10,W.COLUMN2ROW3=11,W.COLUMN3ROW0=12,W.COLUMN3ROW1=13,W.COLUMN3ROW2=14,W.COLUMN3ROW3=15,Object.defineProperties(W.prototype,{length:{get:function(){return W.packedLength}}}),W.prototype.clone=function(e){return W.clone(this,e)},W.prototype.equals=function(e){return W.equals(this,e)},W.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},W.prototype.equalsEpsilon=function(e,t){return W.equalsEpsilon(this,e,t)},W.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var R=new S.Cartesian3,D=new S.Cartesian3,A=new S.Cartesian3,z=new S.Cartesian3,I=new S.Cartesian3,P=new S.Cartesian3,U=new S.Cartesian3,J=new S.Cartesian3,G=new S.Cartesian3,Q=new S.Cartesian3,K=new S.Cartesian3,$=new S.Cartesian3,j=4/3*F.CesiumMath.PI;M.fromPoints=function(e,t){if(T.defined(t)||(t=new M),!T.defined(e)||0===e.length)return t.center=S.Cartesian3.clone(S.Cartesian3.ZERO,t.center),t.radius=0,t;for(var r=S.Cartesian3.clone(e[0],U),n=S.Cartesian3.clone(r,R),a=S.Cartesian3.clone(r,D),i=S.Cartesian3.clone(r,A),o=S.Cartesian3.clone(r,z),s=S.Cartesian3.clone(r,I),u=S.Cartesian3.clone(r,P),c=e.length,l=1;l<c;l++){S.Cartesian3.clone(e[l],r);var f=r.x,d=r.y,h=r.z;f<n.x&&S.Cartesian3.clone(r,n),f>o.x&&S.Cartesian3.clone(r,o),d<a.y&&S.Cartesian3.clone(r,a),d>s.y&&S.Cartesian3.clone(r,s),h<i.z&&S.Cartesian3.clone(r,i),h>u.z&&S.Cartesian3.clone(r,u)}var p=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(o,n,J)),y=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(s,a,J)),m=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(u,i,J)),C=n,w=o,O=p;p<y&&(O=y,C=a,w=s),O<m&&(O=m,C=i,w=u);var b=G;b.x=.5*(C.x+w.x),b.y=.5*(C.y+w.y),b.z=.5*(C.z+w.z);var v=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(w,b,J)),g=Math.sqrt(v),C=Q;C.x=n.x,C.y=a.y,C.z=i.z;w=K;w.x=o.x,w.y=s.y,w.z=u.z;var x=S.Cartesian3.midpoint(C,w,$),E=0;for(l=0;l<c;l++){S.Cartesian3.clone(e[l],r);var k=S.Cartesian3.magnitude(S.Cartesian3.subtract(r,x,J));E<k&&(E=k);var q=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(r,b,J));v<q&&(v=(g=.5*(g+(k=Math.sqrt(q))))*g,b.x=(g*b.x+(q=k-g)*r.x)/k,b.y=(g*b.y+q*r.y)/k,b.z=(g*b.z+q*r.z)/k)}return g<E?(S.Cartesian3.clone(b,t.center),t.radius=g):(S.Cartesian3.clone(x,t.center),t.radius=E),t};var _=new t,ee=new S.Cartesian3,te=new S.Cartesian3,re=new S.Cartographic,ne=new S.Cartographic;M.fromRectangle2D=function(e,t,r){return M.fromRectangleWithHeights2D(e,t,0,0,r)},M.fromRectangleWithHeights2D=function(e,t,r,n,a){if(T.defined(a)||(a=new M),!T.defined(e))return a.center=S.Cartesian3.clone(S.Cartesian3.ZERO,a.center),a.radius=0,a;t=T.defaultValue(t,_),S.Rectangle.southwest(e,re),re.height=r,S.Rectangle.northeast(e,ne),ne.height=n;var i=t.project(re,ee),r=t.project(ne,te),e=r.x-i.x,n=r.y-i.y,t=r.z-i.z;a.radius=.5*Math.sqrt(e*e+n*n+t*t);r=a.center;return r.x=i.x+.5*e,r.y=i.y+.5*n,r.z=i.z+.5*t,a};var ae=[];M.fromRectangle3D=function(e,t,r,n){if(t=T.defaultValue(t,S.Ellipsoid.WGS84),r=T.defaultValue(r,0),T.defined(n)||(n=new M),!T.defined(e))return n.center=S.Cartesian3.clone(S.Cartesian3.ZERO,n.center),n.radius=0,n;r=S.Rectangle.subsample(e,t,r,ae);return M.fromPoints(r,n)},M.fromVertices=function(e,t,r,n){if(T.defined(n)||(n=new M),!T.defined(e)||0===e.length)return n.center=S.Cartesian3.clone(S.Cartesian3.ZERO,n.center),n.radius=0,n;t=T.defaultValue(t,S.Cartesian3.ZERO),r=T.defaultValue(r,3),N.Check.typeOf.number.greaterThanOrEquals("stride",r,3);var a=U;a.x=e[0]+t.x,a.y=e[1]+t.y,a.z=e[2]+t.z;for(var i=S.Cartesian3.clone(a,R),o=S.Cartesian3.clone(a,D),s=S.Cartesian3.clone(a,A),u=S.Cartesian3.clone(a,z),c=S.Cartesian3.clone(a,I),l=S.Cartesian3.clone(a,P),f=e.length,d=0;d<f;d+=r){var h=e[d]+t.x,p=e[d+1]+t.y,y=e[d+2]+t.z;a.x=h,a.y=p,a.z=y,h<i.x&&S.Cartesian3.clone(a,i),h>u.x&&S.Cartesian3.clone(a,u),p<o.y&&S.Cartesian3.clone(a,o),p>c.y&&S.Cartesian3.clone(a,c),y<s.z&&S.Cartesian3.clone(a,s),y>l.z&&S.Cartesian3.clone(a,l)}var m=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(u,i,J)),C=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(c,o,J)),w=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(l,s,J)),O=i,b=u,v=m;m<C&&(v=C,O=o,b=c),v<w&&(v=w,O=s,b=l);var g=G;g.x=.5*(O.x+b.x),g.y=.5*(O.y+b.y),g.z=.5*(O.z+b.z);var x=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(b,g,J)),E=Math.sqrt(x),O=Q;O.x=i.x,O.y=o.y,O.z=s.z;b=K;b.x=u.x,b.y=c.y,b.z=l.z;var k=S.Cartesian3.midpoint(O,b,$),q=0;for(d=0;d<f;d+=r){a.x=e[d]+t.x,a.y=e[d+1]+t.y,a.z=e[d+2]+t.z;var j=S.Cartesian3.magnitude(S.Cartesian3.subtract(a,k,J));q<j&&(q=j);var _=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(a,g,J));x<_&&(x=(E=.5*(E+(j=Math.sqrt(_))))*E,g.x=(E*g.x+(_=j-E)*a.x)/j,g.y=(E*g.y+_*a.y)/j,g.z=(E*g.z+_*a.z)/j)}return E<q?(S.Cartesian3.clone(g,n.center),n.radius=E):(S.Cartesian3.clone(k,n.center),n.radius=q),n},M.fromEncodedCartesianVertices=function(e,t,r){if(T.defined(r)||(r=new M),!T.defined(e)||!T.defined(t)||e.length!==t.length||0===e.length)return r.center=S.Cartesian3.clone(S.Cartesian3.ZERO,r.center),r.radius=0,r;var n=U;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var a=S.Cartesian3.clone(n,R),i=S.Cartesian3.clone(n,D),o=S.Cartesian3.clone(n,A),s=S.Cartesian3.clone(n,z),u=S.Cartesian3.clone(n,I),c=S.Cartesian3.clone(n,P),l=e.length,f=0;f<l;f+=3){var d=e[f]+t[f],h=e[f+1]+t[f+1],p=e[f+2]+t[f+2];n.x=d,n.y=h,n.z=p,d<a.x&&S.Cartesian3.clone(n,a),d>s.x&&S.Cartesian3.clone(n,s),h<i.y&&S.Cartesian3.clone(n,i),h>u.y&&S.Cartesian3.clone(n,u),p<o.z&&S.Cartesian3.clone(n,o),p>c.z&&S.Cartesian3.clone(n,c)}var y=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(s,a,J)),m=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(u,i,J)),C=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(c,o,J)),w=a,O=s,b=y;y<m&&(b=m,w=i,O=u),b<C&&(b=C,w=o,O=c);var v=G;v.x=.5*(w.x+O.x),v.y=.5*(w.y+O.y),v.z=.5*(w.z+O.z);var g=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(O,v,J)),x=Math.sqrt(g),w=Q;w.x=a.x,w.y=i.y,w.z=o.z;O=K;O.x=s.x,O.y=u.y,O.z=c.z;var E=S.Cartesian3.midpoint(w,O,$),k=0;for(f=0;f<l;f+=3){n.x=e[f]+t[f],n.y=e[f+1]+t[f+1],n.z=e[f+2]+t[f+2];var q=S.Cartesian3.magnitude(S.Cartesian3.subtract(n,E,J));k<q&&(k=q);var j=S.Cartesian3.magnitudeSquared(S.Cartesian3.subtract(n,v,J));g<j&&(g=(x=.5*(x+(q=Math.sqrt(j))))*x,v.x=(x*v.x+(j=q-x)*n.x)/q,v.y=(x*v.y+j*n.y)/q,v.z=(x*v.z+j*n.z)/q)}return x<k?(S.Cartesian3.clone(v,r.center),r.radius=x):(S.Cartesian3.clone(E,r.center),r.radius=k),r},M.fromCornerPoints=function(e,t,r){N.Check.typeOf.object("corner",e),N.Check.typeOf.object("oppositeCorner",t),T.defined(r)||(r=new M);e=S.Cartesian3.midpoint(e,t,r.center);return r.radius=S.Cartesian3.distance(e,t),r},M.fromEllipsoid=function(e,t){return N.Check.typeOf.object("ellipsoid",e),T.defined(t)||(t=new M),S.Cartesian3.clone(S.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t};var ie=new S.Cartesian3;M.fromBoundingSpheres=function(e,t){if(T.defined(t)||(t=new M),!T.defined(e)||0===e.length)return t.center=S.Cartesian3.clone(S.Cartesian3.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return M.clone(e[0],t);if(2===r)return M.union(e[0],e[1],t);for(var n=[],a=0;a<r;a++)n.push(e[a].center);var i=(t=M.fromPoints(n,t)).center,o=t.radius;for(a=0;a<r;a++)var s=e[a],o=Math.max(o,S.Cartesian3.distance(i,s.center,ie)+s.radius);return t.radius=o,t};var oe=new S.Cartesian3,se=new S.Cartesian3,ue=new S.Cartesian3;M.fromOrientedBoundingBox=function(e,t){N.Check.defined("orientedBoundingBox",e),T.defined(t)||(t=new M);var r=e.halfAxes,n=L.getColumn(r,0,oe),a=L.getColumn(r,1,se),r=L.getColumn(r,2,ue);return S.Cartesian3.add(n,a,n),S.Cartesian3.add(n,r,n),t.center=S.Cartesian3.clone(e.center,t.center),t.radius=S.Cartesian3.magnitude(n),t},M.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t.center=S.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new M(e.center,e.radius)},M.packedLength=4,M.pack=function(e,t,r){N.Check.typeOf.object("value",e),N.Check.defined("array",t),r=T.defaultValue(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},M.unpack=function(e,t,r){N.Check.defined("array",e),t=T.defaultValue(t,0);var n=(r=!T.defined(r)?new M:r).center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var ce=new S.Cartesian3,le=new S.Cartesian3;M.union=function(e,t,r){N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),T.defined(r)||(r=new M);var n=e.center,a=e.radius,i=t.center,o=t.radius,s=S.Cartesian3.subtract(i,n,ce),i=S.Cartesian3.magnitude(s);if(i+o<=a)return e.clone(r),r;if(i+a<=o)return t.clone(r),r;o=.5*(a+i+o),i=S.Cartesian3.multiplyByScalar(s,(o-a)/i,le);return S.Cartesian3.add(i,n,i),S.Cartesian3.clone(i,r.center),r.radius=o,r};var fe=new S.Cartesian3;M.expand=function(e,t,r){N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("point",t),r=M.clone(e,r);t=S.Cartesian3.magnitude(S.Cartesian3.subtract(t,r.center,fe));return t>r.radius&&(r.radius=t),r},M.intersectPlane=function(e,t){N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("plane",t);var r=e.center,n=e.radius,e=t.normal,t=S.Cartesian3.dot(e,r)+t.distance;return t<-n?a.OUTSIDE:t<n?a.INTERSECTING:a.INSIDE},M.transform=function(e,t,r){return N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("transform",t),(r=!T.defined(r)?new M:r).center=W.multiplyByPoint(t,e.center,r.center),r.radius=W.getMaximumScale(t)*e.radius,r};var de=new S.Cartesian3;M.distanceSquaredTo=function(e,t){N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("cartesian",t);t=S.Cartesian3.subtract(e.center,t,de);return S.Cartesian3.magnitudeSquared(t)-e.radius*e.radius},M.transformWithoutScale=function(e,t,r){return N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("transform",t),(r=!T.defined(r)?new M:r).center=W.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var he=new S.Cartesian3;M.computePlaneDistances=function(e,t,r,n){N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("position",t),N.Check.typeOf.object("direction",r),T.defined(n)||(n=new i);t=S.Cartesian3.subtract(e.center,t,he),t=S.Cartesian3.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var pe=new S.Cartesian3,ye=new S.Cartesian3,me=new S.Cartesian3,Ce=new S.Cartesian3,we=new S.Cartesian3,Oe=new S.Cartographic,be=new Array(8),ve=0;ve<8;++ve)be[ve]=new S.Cartesian3;var ge,xe=new t;M.projectTo2D=function(e,t,r){N.Check.typeOf.object("sphere",e);var n=(t=T.defaultValue(t,xe)).ellipsoid,a=e.center,i=e.radius,o=S.Cartesian3.equals(a,S.Cartesian3.ZERO)?S.Cartesian3.clone(S.Cartesian3.UNIT_X,pe):n.geodeticSurfaceNormal(a,pe),s=S.Cartesian3.cross(S.Cartesian3.UNIT_Z,o,ye);S.Cartesian3.normalize(s,s);var u=S.Cartesian3.cross(o,s,me);S.Cartesian3.normalize(u,u),S.Cartesian3.multiplyByScalar(o,i,o),S.Cartesian3.multiplyByScalar(u,i,u),S.Cartesian3.multiplyByScalar(s,i,s);var c=S.Cartesian3.negate(u,we),e=S.Cartesian3.negate(s,Ce),l=be,i=l[0];S.Cartesian3.add(o,u,i),S.Cartesian3.add(i,s,i),i=l[1],S.Cartesian3.add(o,u,i),S.Cartesian3.add(i,e,i),i=l[2],S.Cartesian3.add(o,c,i),S.Cartesian3.add(i,e,i),i=l[3],S.Cartesian3.add(o,c,i),S.Cartesian3.add(i,s,i),S.Cartesian3.negate(o,o),i=l[4],S.Cartesian3.add(o,u,i),S.Cartesian3.add(i,s,i),i=l[5],S.Cartesian3.add(o,u,i),S.Cartesian3.add(i,e,i),i=l[6],S.Cartesian3.add(o,c,i),S.Cartesian3.add(i,e,i),i=l[7],S.Cartesian3.add(o,c,i),S.Cartesian3.add(i,s,i);for(var f=l.length,d=0;d<f;++d){var h=l[d];S.Cartesian3.add(a,h,h);var p=n.cartesianToCartographic(h,Oe);t.project(p,h)}c=(a=(r=M.fromPoints(l,r)).center).x,s=a.y,i=a.z;return a.x=i,a.y=c,a.z=s,r},M.isOccluded=function(e,t){return N.Check.typeOf.object("sphere",e),N.Check.typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)},M.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&S.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},M.prototype.intersectPlane=function(e){return M.intersectPlane(this,e)},M.prototype.distanceSquaredTo=function(e){return M.distanceSquaredTo(this,e)},M.prototype.computePlaneDistances=function(e,t,r){return M.computePlaneDistances(this,e,t,r)},M.prototype.isOccluded=function(e){return M.isOccluded(this,e)},M.prototype.equals=function(e){return M.equals(this,e)},M.prototype.clone=function(e){return M.clone(this,e)},M.prototype.volume=function(){var e=this.radius;return j*e*e*e};var Ee,ke,qe,je,_e,Se,Te,Me,Re,De,Ae,ze,Ie,Pe,Ue,Ne,Fe,Ve={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Le={};function Be(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function We(){var e;return T.defined(ke)||(ke=!1,Xe()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(Ee.userAgent))&&(ke=!0,qe=Be(e[1]))),ke}function Ye(){var e;return T.defined(je)||(je=!1,We()||Xe()||!/ Safari\/[\.0-9]+/.test(Ee.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(Ee.userAgent))&&(je=!0,_e=Be(e[1]))),je}function He(){var e;return T.defined(Se)||(Se=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Ee.userAgent))&&(Se=!0,(Te=Be(e[1])).isNightly=!!e[2])),Se}function Ze(){var e;return T.defined(Me)||(Me=!1,"Microsoft Internet Explorer"===Ee.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Ee.userAgent))&&(Me=!0,Re=Be(e[1])):"Netscape"===Ee.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Ee.userAgent))&&(Me=!0,Re=Be(e[1]))),Me}function Xe(){var e;return T.defined(De)||(De=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(Ee.userAgent))&&(De=!0,Ae=Be(e[1]))),De}function Je(){var e;return T.defined(ze)||(ze=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(Ee.userAgent))&&(ze=!0,Ie=Be(e[1]))),ze}function Ge(){var e;return T.defined(Fe)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(Fe=T.defined(e)&&""!==e)&&(Ne=e)),Fe}function Qe(){if(!Qe.initialized)throw new N.DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return Qe._result}Object.defineProperties(Le,{element:{get:function(){if(Le.supportsFullscreen())return document[Ve.fullscreenElement]}},changeEventName:{get:function(){if(Le.supportsFullscreen())return Ve.fullscreenchange}},errorEventName:{get:function(){if(Le.supportsFullscreen())return Ve.fullscreenerror}},enabled:{get:function(){if(Le.supportsFullscreen())return document[Ve.fullscreenEnabled]}},fullscreen:{get:function(){if(Le.supportsFullscreen())return null!==Le.element}}}),Le.supportsFullscreen=function(){if(T.defined(ge))return ge;ge=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return Ve.requestFullscreen="requestFullscreen",Ve.exitFullscreen="exitFullscreen",Ve.fullscreenEnabled="fullscreenEnabled",Ve.fullscreenElement="fullscreenElement",Ve.fullscreenchange="fullscreenchange",Ve.fullscreenerror="fullscreenerror",ge=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var a,i=t[r];"function"!=typeof e[a=i+"RequestFullscreen"]&&"function"!=typeof e[a=i+"RequestFullScreen"]||(Ve.requestFullscreen=a,ge=!0),a=i+"ExitFullscreen","function"==typeof document[a]?Ve.exitFullscreen=a:(a=i+"CancelFullScreen","function"==typeof document[a]&&(Ve.exitFullscreen=a)),a=i+"FullscreenEnabled",void 0!==document[a]?Ve.fullscreenEnabled=a:(a=i+"FullScreenEnabled",void 0!==document[a]&&(Ve.fullscreenEnabled=a)),a=i+"FullscreenElement",void 0!==document[a]?Ve.fullscreenElement=a:(a=i+"FullScreenElement",void 0!==document[a]&&(Ve.fullscreenElement=a)),a=i+"fullscreenchange",void 0!==document["on"+a]&&(Ve.fullscreenchange=a="ms"===i?"MSFullscreenChange":a),a=i+"fullscreenerror",void 0!==document["on"+a]&&(Ve.fullscreenerror=a="ms"===i?"MSFullscreenError":a)}return ge},Le.requestFullscreen=function(e,t){Le.supportsFullscreen()&&e[Ve.requestFullscreen]({vrDisplay:t})},Le.exitFullscreen=function(){Le.supportsFullscreen()&&document[Ve.exitFullscreen]()},Le._names=Ve,Ee="undefined"!=typeof navigator?navigator:{},Qe._promise=void 0,Qe._result=void 0,Qe.initialize=function(){if(T.defined(Qe._promise))return Qe._promise;var e=T.when.defer();if(Qe._promise=e.promise,Xe())return Qe._result=!1,e.resolve(Qe._result),e.promise;var t=new Image;return t.onload=function(){Qe._result=0<t.width&&0<t.height,e.resolve(Qe._result)},t.onerror=function(){Qe._result=!1,e.resolve(Qe._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(Qe,{initialized:{get:function(){return T.defined(Qe._result)}}});C=[];"undefined"!=typeof ArrayBuffer&&(C.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&C.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&C.push(Uint8ClampedArray));var Ke={isChrome:We,chromeVersion:function(){return We()&&qe},isSafari:Ye,safariVersion:function(){return Ye()&&_e},isWebkit:He,webkitVersion:function(){return He()&&Te},isInternetExplorer:Ze,internetExplorerVersion:function(){return Ze()&&Re},isEdge:Xe,edgeVersion:function(){return Xe()&&Ae},isFirefox:Je,firefoxVersion:function(){return Je()&&Ie},isWindows:function(){return Pe=!T.defined(Pe)?/Windows/i.test(Ee.appVersion):Pe},hardwareConcurrency:T.defaultValue(Ee.hardwareConcurrency,3),supportsPointerEvents:function(){return Ue=!T.defined(Ue)?!Je()&&"undefined"!=typeof PointerEvent&&(!T.defined(Ee.pointerEnabled)||Ee.pointerEnabled):Ue},supportsImageRenderingPixelated:Ge,supportsWebP:Qe,imageRenderingValue:function(){return Ge()?Ne:void 0},typedArrayTypes:C};function $e(e,t,r,n){this.x=T.defaultValue(e,0),this.y=T.defaultValue(t,0),this.z=T.defaultValue(r,0),this.w=T.defaultValue(n,0)}Ke.supportsFullscreen=function(){return Le.supportsFullscreen()},Ke.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},Ke.supportsWebWorkers=function(){return"undefined"!=typeof Worker},Ke.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!Ke.isEdge()};var et=new S.Cartesian3;$e.fromAxisAngle=function(e,t,r){N.Check.typeOf.object("axis",e),N.Check.typeOf.number("angle",t);var n=t/2,a=Math.sin(n),t=(et=S.Cartesian3.normalize(e,et)).x*a,e=et.y*a,a=et.z*a,n=Math.cos(n);return T.defined(r)?(r.x=t,r.y=e,r.z=a,r.w=n,r):new $e(t,e,a,n)};var tt=[1,2,0],rt=new Array(3);$e.fromRotationMatrix=function(e,t){var r,n,a;N.Check.typeOf.object("matrix",e);var i,o=e[L.COLUMN0ROW0],s=e[L.COLUMN1ROW1],u=e[L.COLUMN2ROW2],c=o+s+u,l=0<c?(a=.5*(i=Math.sqrt(c+1)),r=(e[L.COLUMN1ROW2]-e[L.COLUMN2ROW1])*(i=.5/i),n=(e[L.COLUMN2ROW0]-e[L.COLUMN0ROW2])*i,(e[L.COLUMN0ROW1]-e[L.COLUMN1ROW0])*i):(s=tt[o=tt[u=o<u&&s<u?2:o<s?1:0]],i=Math.sqrt(e[L.getElementIndex(u,u)]-e[L.getElementIndex(o,o)]-e[L.getElementIndex(s,s)]+1),(l=rt)[u]=.5*i,i=.5/i,a=(e[L.getElementIndex(s,o)]-e[L.getElementIndex(o,s)])*i,l[o]=(e[L.getElementIndex(o,u)]+e[L.getElementIndex(u,o)])*i,l[s]=(e[L.getElementIndex(s,u)]+e[L.getElementIndex(u,s)])*i,r=-l[0],n=-l[1],-l[2]);return T.defined(t)?(t.x=r,t.y=n,t.z=l,t.w=a,t):new $e(r,n,l,a)};var nt,at,it,ot=new $e;new $e,new $e,new $e;$e.fromHeadingPitchRoll=function(e,t){return N.Check.typeOf.object("headingPitchRoll",e),it=$e.fromAxisAngle(S.Cartesian3.UNIT_X,e.roll,ot),at=$e.fromAxisAngle(S.Cartesian3.UNIT_Y,-e.pitch,t),t=$e.multiply(at,it,at),nt=$e.fromAxisAngle(S.Cartesian3.UNIT_Z,-e.heading,ot),$e.multiply(nt,t,t)};var st=new S.Cartesian3,ut=new S.Cartesian3,ct=new $e,lt=new $e,ft=new $e;$e.packedLength=4,$e.pack=function(e,t,r){return N.Check.typeOf.object("value",e),N.Check.defined("array",t),r=T.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},$e.unpack=function(e,t,r){return N.Check.defined("array",e),t=T.defaultValue(t,0),(r=!T.defined(r)?new $e:r).x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},$e.packedInterpolationLength=3,$e.convertPackedArrayForInterpolation=function(e,t,r,n){$e.unpack(e,4*r,ft),$e.conjugate(ft,ft);for(var a=0,i=r-t+1;a<i;a++){var o=3*a;$e.unpack(e,4*(t+a),ct),$e.multiply(ct,ft,ct),ct.w<0&&$e.negate(ct,ct),$e.computeAxis(ct,st);var s=$e.computeAngle(ct);(n=!T.defined(n)?[]:n)[o]=st.x*s,n[1+o]=st.y*s,n[2+o]=st.z*s}},$e.unpackInterpolationResult=function(e,t,r,n,a){T.defined(a)||(a=new $e),S.Cartesian3.fromArray(e,0,ut);e=S.Cartesian3.magnitude(ut);return $e.unpack(t,4*n,lt),0===e?$e.clone($e.IDENTITY,ct):$e.fromAxisAngle(ut,e,ct),$e.multiply(ct,lt,a)},$e.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new $e(e.x,e.y,e.z,e.w)},$e.conjugate=function(e,t){return N.Check.typeOf.object("quaternion",e),N.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},$e.magnitudeSquared=function(e){return N.Check.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},$e.magnitude=function(e){return Math.sqrt($e.magnitudeSquared(e))},$e.normalize=function(e,t){N.Check.typeOf.object("result",t);var r=1/$e.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,r=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=r,t},$e.inverse=function(e,t){N.Check.typeOf.object("result",t);var r=$e.magnitudeSquared(e);return t=$e.conjugate(e,t),$e.multiplyByScalar(t,1/r,t)},$e.add=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},$e.subtract=function(e,t,r){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},$e.negate=function(e,t){return N.Check.typeOf.object("quaternion",e),N.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},$e.dot=function(e,t){return N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},$e.multiply=function(e,t,r){N.Check.typeOf.object("left",e),N.Check.typeOf.object("right",t),N.Check.typeOf.object("result",r);var n=e.x,a=e.y,i=e.z,o=e.w,s=t.x,u=t.y,c=t.z,l=t.w,f=o*u-n*c+a*l+i*s,e=o*c+n*u-a*s+i*l,t=o*l-n*s-a*u-i*c;return r.x=o*s+n*l+a*c-i*u,r.y=f,r.z=e,r.w=t,r},$e.multiplyByScalar=function(e,t,r){return N.Check.typeOf.object("quaternion",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},$e.divideByScalar=function(e,t,r){return N.Check.typeOf.object("quaternion",e),N.Check.typeOf.number("scalar",t),N.Check.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},$e.computeAxis=function(e,t){N.Check.typeOf.object("quaternion",e),N.Check.typeOf.object("result",t);var r=e.w;if(Math.abs(r-1)<F.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},$e.computeAngle=function(e){return N.Check.typeOf.object("quaternion",e),Math.abs(e.w-1)<F.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var dt=new $e;$e.lerp=function(e,t,r,n){return N.Check.typeOf.object("start",e),N.Check.typeOf.object("end",t),N.Check.typeOf.number("t",r),N.Check.typeOf.object("result",n),dt=$e.multiplyByScalar(t,r,dt),n=$e.multiplyByScalar(e,1-r,n),$e.add(dt,n,n)};var ht=new $e,pt=new $e,yt=new $e;$e.slerp=function(e,t,r,n){N.Check.typeOf.object("start",e),N.Check.typeOf.object("end",t),N.Check.typeOf.number("t",r),N.Check.typeOf.object("result",n);var a=$e.dot(e,t),i=t;if(a<0&&(a=-a,i=ht=$e.negate(t,ht)),1-a<F.CesiumMath.EPSILON6)return $e.lerp(e,i,r,n);a=Math.acos(a);return pt=$e.multiplyByScalar(e,Math.sin((1-r)*a),pt),yt=$e.multiplyByScalar(i,Math.sin(r*a),yt),n=$e.add(pt,yt,n),$e.multiplyByScalar(n,1/Math.sin(a),n)},$e.log=function(e,t){N.Check.typeOf.object("quaternion",e),N.Check.typeOf.object("result",t);var r=F.CesiumMath.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),S.Cartesian3.multiplyByScalar(e,n,t)},$e.exp=function(e,t){N.Check.typeOf.object("cartesian",e),N.Check.typeOf.object("result",t);var r=S.Cartesian3.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var mt=new S.Cartesian3,Ct=new S.Cartesian3,wt=new $e,Ot=new $e;$e.computeInnerQuadrangle=function(e,t,r,n){N.Check.typeOf.object("q0",e),N.Check.typeOf.object("q1",t),N.Check.typeOf.object("q2",r),N.Check.typeOf.object("result",n);var a=$e.conjugate(t,wt);$e.multiply(a,r,Ot);r=$e.log(Ot,mt);$e.multiply(a,e,Ot);e=$e.log(Ot,Ct);return S.Cartesian3.add(r,e,r),S.Cartesian3.multiplyByScalar(r,.25,r),S.Cartesian3.negate(r,r),$e.exp(r,wt),$e.multiply(t,wt,n)},$e.squad=function(e,t,r,n,a,i){N.Check.typeOf.object("q0",e),N.Check.typeOf.object("q1",t),N.Check.typeOf.object("s0",r),N.Check.typeOf.object("s1",n),N.Check.typeOf.number("t",a),N.Check.typeOf.object("result",i);t=$e.slerp(e,t,a,wt),n=$e.slerp(r,n,a,Ot);return $e.slerp(t,n,2*a*(1-a),i)};for(var bt=new $e,C=1.9011074535173003,vt=Ke.supportsTypedArrays()?new Float32Array(8):[],gt=Ke.supportsTypedArrays()?new Float32Array(8):[],xt=Ke.supportsTypedArrays()?new Float32Array(8):[],Et=Ke.supportsTypedArrays()?new Float32Array(8):[],kt=0;kt<7;++kt){var qt=kt+1,jt=2*qt+1;vt[kt]=1/(qt*jt),gt[kt]=qt/jt}function _t(e,t,r){N.Check.defined("array",e),N.Check.defined("itemToFind",t),N.Check.defined("comparator",r);for(var n,a,i=0,o=e.length-1;i<=o;)if((a=r(e[n=~~((i+o)/2)],t))<0)i=1+n;else{if(!(0<a))return n;o=n-1}return~(o+1)}function St(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}function Tt(){function O(e,t,r,n){return r=r||" ",r=e.length>=t?"":Array(1+t-e.length>>>0).join(r),n?e+r:r+e}function b(e,t,r,n,a,i){var o=n-e.length;return e=0<o?r||!a?O(e,n,i,r):e.slice(0,t.length)+O("",o,"0",!0)+e.slice(t.length):e}function v(e,t,r,n,a,i,o){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+O(s.toString(t),i||0,"0",!1),b(e,r,n,a,o)}function g(e,t,r,n,a,i){return null!=n&&(e=e.slice(0,n)),b(e,"",t,r,a,i)}var x=arguments,E=0,e=x[E++];return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,a,i,o){var s,u,c,l,f;if("%%"==e)return"%";for(var d=!1,h="",p=!1,y=!1,m=" ",C=r.length,w=0;r&&w<C;w++)switch(r.charAt(w)){case" ":h=" ";break;case"+":h="+";break;case"-":d=!0;break;case"'":m=r.charAt(w+1);break;case"0":p=!0;break;case"#":y=!0}if((n=n?"*"==n?+x[E++]:"*"==n.charAt(0)?+x[n.slice(1,-1)]:+n:0)<0&&(n=-n,d=!0),!isFinite(n))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+x[E++]:"*"==i.charAt(0)?+x[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(o)?6:"d"==o?0:void 0,f=t?x[t.slice(0,-1)]:x[E++],o){case"s":return g(String(f),d,n,i,p,m);case"c":return g(String.fromCharCode(+f),d,n,i,p);case"b":return v(f,2,y,d,n,i,p);case"o":return v(f,8,y,d,n,i,p);case"x":return v(f,16,y,d,n,i,p);case"X":return v(f,16,y,d,n,i,p).toUpperCase();case"u":return v(f,10,y,d,n,i,p);case"i":case"d":return s=+f||0,f=(u=(s=Math.round(s-s%1))<0?"-":h)+O(String(Math.abs(s)),i,"0",!1),b(f,u,d,n,p);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+f)<0?"-":h,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],f=u+Math.abs(s)[c](i),b(f,u,d,n,p)[l]();default:return e}})}function Mt(e,t,r,n,a,i,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=o,this.isLeapSecond=s}function Rt(e){if(null===e||isNaN(e))throw new N.DeveloperError("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function Dt(e,t){this.julianDate=e,this.offset=t}vt[7]=C/136,gt[7]=8*C/17,$e.fastSlerp=function(e,t,r,n){N.Check.typeOf.object("start",e),N.Check.typeOf.object("end",t),N.Check.typeOf.number("t",r),N.Check.typeOf.object("result",n);var a,i=$e.dot(e,t);0<=i?a=1:(a=-1,i=-i);for(var o=i-1,i=1-r,s=r*r,u=i*i,c=7;0<=c;--c)xt[c]=(vt[c]*s-gt[c])*o,Et[c]=(vt[c]*u-gt[c])*o;r=a*r*(1+xt[0]*(1+xt[1]*(1+xt[2]*(1+xt[3]*(1+xt[4]*(1+xt[5]*(1+xt[6]*(1+xt[7])))))))),i*=1+Et[0]*(1+Et[1]*(1+Et[2]*(1+Et[3]*(1+Et[4]*(1+Et[5]*(1+Et[6]*(1+Et[7]))))))),i=$e.multiplyByScalar(e,i,bt);return $e.multiplyByScalar(t,r,n),$e.add(i,n,n)},$e.fastSquad=function(e,t,r,n,a,i){N.Check.typeOf.object("q0",e),N.Check.typeOf.object("q1",t),N.Check.typeOf.object("s0",r),N.Check.typeOf.object("s1",n),N.Check.typeOf.number("t",a),N.Check.typeOf.object("result",i);t=$e.fastSlerp(e,t,a,wt),n=$e.fastSlerp(r,n,a,Ot);return $e.fastSlerp(t,n,2*a*(1-a),i)},$e.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},$e.equalsEpsilon=function(e,t,r){return r=T.defaultValue(r,0),e===t||T.defined(e)&&T.defined(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},$e.ZERO=Object.freeze(new $e(0,0,0,0)),$e.IDENTITY=Object.freeze(new $e(0,0,0,1)),$e.prototype.clone=function(e){return $e.clone(this,e)},$e.prototype.equals=function(e){return $e.equals(this,e)},$e.prototype.equalsEpsilon=function(e,t){return $e.equalsEpsilon(this,e,t)},$e.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var At=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),zt=Object.freeze({UTC:0,TAI:1}),It=new Mt,Pt=[31,28,31,30,31,30,31,31,30,31,30,31];function Ut(e,t){return $t.compare(e.julianDate,t.julianDate)}var Nt=new Dt;function Ft(e){Nt.julianDate=e;var t=$t.leapSeconds,r=_t(t,Nt,Ut),n=t[r=(r=r<0?~r:r)>=t.length?t.length-1:r].offset;0<r&&n<$t.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),$t.addSeconds(e,n,e)}function Vt(e,t){Nt.julianDate=e;var r=$t.leapSeconds,n=_t(r,Nt,Ut);if(0===(n=n<0?~n:n))return $t.addSeconds(e,-r[0].offset,t);if(n>=r.length)return $t.addSeconds(e,-r[n-1].offset,t);var a=$t.secondsDifference(r[n].julianDate,e);return 0===a?$t.addSeconds(e,-r[n].offset,t):a<=1?void 0:$t.addSeconds(e,-r[--n].offset,t)}function Lt(e,t,r){var n=t/At.SECONDS_PER_DAY|0;return e+=n,(t-=At.SECONDS_PER_DAY*n)<0&&(e--,t+=At.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Bt(e,t,r,n,a,i,o){var s=(t-14)/12|0,e=e+4800+s,r=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);o=i+(n*At.SECONDS_PER_HOUR+a*At.SECONDS_PER_MINUTE+o*At.SECONDS_PER_MILLISECOND);return 43200<=o&&--r,[r,o]}var Wt=/^(\d{4})$/,Yt=/^(\d{4})-(\d{2})$/,Ht=/^(\d{4})-?(\d{3})$/,Zt=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Xt=/^(\d{4})-?(\d{2})-?(\d{2})$/,C=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Jt=/^(\d{2})(\.\d+)?/.source+C.source,Gt=/^(\d{2}):?(\d{2})(\.\d+)?/.source+C.source,Qt=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+C.source,Kt="Invalid ISO 8601 date.";function $t(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=T.defaultValue(e,0),t=T.defaultValue(t,0),r=T.defaultValue(r,zt.UTC);var n=0|e;Lt(n,t+=(e-n)*At.SECONDS_PER_DAY,this),r===zt.UTC&&Ft(this)}$t.fromGregorianDate=function(e,t){if(!(e instanceof Mt))throw new N.DeveloperError("date must be a valid GregorianDate.");e=Bt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return T.defined(t)?(Lt(e[0],e[1],t),Ft(t),t):new $t(e[0],e[1],zt.UTC)},$t.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new N.DeveloperError("date must be a valid JavaScript Date.");e=Bt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return T.defined(t)?(Lt(e[0],e[1],t),Ft(t),t):new $t(e[0],e[1],zt.UTC)},$t.fromIso8601=function(e,t){if("string"!=typeof e)throw new N.DeveloperError(Kt);var r,n,a,i=(e=e.replace(",",".")).split("T"),o=1,s=1,u=0,c=0,l=0,f=0,d=i[0],h=i[1];if(!T.defined(d))throw new N.DeveloperError(Kt);if(null!==(i=d.match(Xt))){if(0<(p=d.split("-").length-1)&&2!==p)throw new N.DeveloperError(Kt);y=+i[1],o=+i[2],s=+i[3]}else if(null!==(i=d.match(Yt)))y=+i[1],o=+i[2];else if(null!==(i=d.match(Wt)))y=+i[1];else{if(null!==(i=d.match(Ht))){if(y=+i[1],C=+i[2],n=Rt(y),C<1||n&&366<C||!n&&365<C)throw new N.DeveloperError(Kt)}else{if(null===(i=d.match(Zt)))throw new N.DeveloperError(Kt);var p,y=+i[1],m=+i[2],e=+i[3]||0;if(0<(p=d.split("-").length-1)&&(!T.defined(i[3])&&1!==p||T.defined(i[3])&&2!==p))throw new N.DeveloperError(Kt);var C=7*m+e-new Date(Date.UTC(y,0,4)).getUTCDay()-3}(r=new Date(Date.UTC(y,0,1))).setUTCDate(C),o=r.getUTCMonth()+1,s=r.getUTCDate()}if(n=Rt(y),o<1||12<o||s<1||(2!==o||!n)&&Pt[o-1]<s||n&&2===o&&29<s)throw new N.DeveloperError(Kt);if(T.defined(h)){if(null!==(i=h.match(Qt))){if(0<(p=h.split(":").length-1)&&2!==p&&3!==p)throw new N.DeveloperError(Kt);u=+i[1],c=+i[2],l=+i[3],f=1e3*+(i[4]||0),a=5}else if(null!==(i=h.match(Gt))){if(2<(p=h.split(":").length-1))throw new N.DeveloperError(Kt);u=+i[1],c=+i[2],l=60*+(i[3]||0),a=4}else{if(null===(i=h.match(Jt)))throw new N.DeveloperError(Kt);u=+i[1],c=60*+(i[2]||0),a=3}if(60<=c||61<=l||24<u||24===u&&(0<c||0<l||0<f))throw new N.DeveloperError(Kt);var w=i[a],O=+i[a+1],b=+(i[a+2]||0);switch(w){case"+":u-=O,c-=b;break;case"-":u+=O,c+=b;break;case"Z":break;default:c+=new Date(Date.UTC(y,o-1,s,u,c)).getTimezoneOffset()}}w=60===l;for(w&&l--;60<=c;)c-=60,u++;for(;24<=u;)u-=24,s++;for(r=n&&2===o?29:Pt[o-1];r<s;)s-=r,12<++o&&(o-=12,y++),r=n&&2===o?29:Pt[o-1];for(;c<0;)c+=60,u--;for(;u<0;)u+=24,s--;for(;s<1;)--o<1&&(o+=12,y--),s+=r=n&&2===o?29:Pt[o-1];f=Bt(y,o,s,u,c,l,f);return T.defined(t)?(Lt(f[0],f[1],t),Ft(t)):t=new $t(f[0],f[1],zt.UTC),w&&$t.addSeconds(t,1,t),t},$t.now=function(e){return $t.fromDate(new Date,e)};var er=new $t(0,0,zt.TAI);function tr(e){e instanceof tr?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(e=rr.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5])}$t.toGregorianDate=function(e,t){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");var r=!1,n=Vt(e,er);T.defined(n)||($t.addSeconds(e,-1,er),n=Vt(er,er),r=!0);var a=n.dayNumber,i=n.secondsOfDay;43200<=i&&(a+=1);var o=a+68569|0,s=4*o/146097|0,u=4e3*(1+(o=o-((146097*s+3)/4|0)|0))/1461001|0,e=80*(o=o-(1461*u/4|0)+31|0)/2447|0,n=o-(2447*e/80|0)|0,a=2+e-12*(o=e/11|0)|0,e=100*(s-49)+u+o|0,s=i/At.SECONDS_PER_HOUR|0,u=i-s*At.SECONDS_PER_HOUR,o=u/At.SECONDS_PER_MINUTE|0,i=0|(u-=o*At.SECONDS_PER_MINUTE),u=(u-i)/At.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),r&&(i+=1),T.defined(t)?(t.year=e,t.month=a,t.day=n,t.hour=s,t.minute=o,t.second=i,t.millisecond=u,t.isLeapSecond=r,t):new Mt(e,a,n,s,o,i,u,r)},$t.toDate=function(e){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");var t=$t.toGregorianDate(e,It),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},$t.toIso8601=function(e,t){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");var r=$t.toGregorianDate(e,It),n=r.year,a=r.month,i=r.day,o=r.hour,s=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===a&&1===i&&0===o&&0===s&&0===e&&0===r&&(n=9999,a=12,i=31,o=24),T.defined(t)||0===r?T.defined(t)&&0!==t?Tt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,o,s,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):Tt("%04d-%02d-%02dT%02d:%02d:%02dZ",n,a,i,o,s,e):Tt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,o,s,e,(.01*r).toString().replace(".",""))},$t.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new $t(e.dayNumber,e.secondsOfDay,zt.TAI)},$t.compare=function(e,t){if(!T.defined(e))throw new N.DeveloperError("left is required.");if(!T.defined(t))throw new N.DeveloperError("right is required.");var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},$t.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},$t.equalsEpsilon=function(e,t,r){return r=T.defaultValue(r,0),e===t||T.defined(e)&&T.defined(t)&&Math.abs($t.secondsDifference(e,t))<=r},$t.totalDays=function(e){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");return e.dayNumber+e.secondsOfDay/At.SECONDS_PER_DAY},$t.secondsDifference=function(e,t){if(!T.defined(e))throw new N.DeveloperError("left is required.");if(!T.defined(t))throw new N.DeveloperError("right is required.");return(e.dayNumber-t.dayNumber)*At.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},$t.daysDifference=function(e,t){if(!T.defined(e))throw new N.DeveloperError("left is required.");if(!T.defined(t))throw new N.DeveloperError("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/At.SECONDS_PER_DAY},$t.computeTaiMinusUtc=function(e){Nt.julianDate=e;var t=$t.leapSeconds,e=_t(t,Nt,Ut);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},$t.addSeconds=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");if(!T.defined(t))throw new N.DeveloperError("seconds is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");return Lt(e.dayNumber,e.secondsOfDay+t,r)},$t.addMinutes=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");if(!T.defined(t))throw new N.DeveloperError("minutes is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");t=e.secondsOfDay+t*At.SECONDS_PER_MINUTE;return Lt(e.dayNumber,t,r)},$t.addHours=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");if(!T.defined(t))throw new N.DeveloperError("hours is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");t=e.secondsOfDay+t*At.SECONDS_PER_HOUR;return Lt(e.dayNumber,t,r)},$t.addDays=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("julianDate is required.");if(!T.defined(t))throw new N.DeveloperError("days is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");return Lt(e.dayNumber+t,e.secondsOfDay,r)},$t.lessThan=function(e,t){return $t.compare(e,t)<0},$t.lessThanOrEquals=function(e,t){return $t.compare(e,t)<=0},$t.greaterThan=function(e,t){return 0<$t.compare(e,t)},$t.greaterThanOrEquals=function(e,t){return 0<=$t.compare(e,t)},$t.prototype.clone=function(e){return $t.clone(this,e)},$t.prototype.equals=function(e){return $t.equals(this,e)},$t.prototype.equalsEpsilon=function(e,t){return $t.equalsEpsilon(this,e,t)},$t.prototype.toString=function(){return $t.toIso8601(this)},$t.leapSeconds=[new Dt(new $t(2441317,43210,zt.TAI),10),new Dt(new $t(2441499,43211,zt.TAI),11),new Dt(new $t(2441683,43212,zt.TAI),12),new Dt(new $t(2442048,43213,zt.TAI),13),new Dt(new $t(2442413,43214,zt.TAI),14),new Dt(new $t(2442778,43215,zt.TAI),15),new Dt(new $t(2443144,43216,zt.TAI),16),new Dt(new $t(2443509,43217,zt.TAI),17),new Dt(new $t(2443874,43218,zt.TAI),18),new Dt(new $t(2444239,43219,zt.TAI),19),new Dt(new $t(2444786,43220,zt.TAI),20),new Dt(new $t(2445151,43221,zt.TAI),21),new Dt(new $t(2445516,43222,zt.TAI),22),new Dt(new $t(2446247,43223,zt.TAI),23),new Dt(new $t(2447161,43224,zt.TAI),24),new Dt(new $t(2447892,43225,zt.TAI),25),new Dt(new $t(2448257,43226,zt.TAI),26),new Dt(new $t(2448804,43227,zt.TAI),27),new Dt(new $t(2449169,43228,zt.TAI),28),new Dt(new $t(2449534,43229,zt.TAI),29),new Dt(new $t(2450083,43230,zt.TAI),30),new Dt(new $t(2450630,43231,zt.TAI),31),new Dt(new $t(2451179,43232,zt.TAI),32),new Dt(new $t(2453736,43233,zt.TAI),33),new Dt(new $t(2454832,43234,zt.TAI),34),new Dt(new $t(2456109,43235,zt.TAI),35),new Dt(new $t(2457204,43236,zt.TAI),36),new Dt(new $t(2457754,43237,zt.TAI),37)],tr.prototype.scheme=null,tr.prototype.authority=null,tr.prototype.path="",tr.prototype.query=null,tr.prototype.fragment=null;var rr=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");tr.prototype.getScheme=function(){return this.scheme},tr.prototype.getAuthority=function(){return this.authority},tr.prototype.getPath=function(){return this.path},tr.prototype.getQuery=function(){return this.query},tr.prototype.getFragment=function(){return this.fragment},tr.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},tr.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},tr.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},tr.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(ir,sr).replace(nr,or)),this.path&&(this.path=this.path.replace(nr,or)),this.query&&(this.query=this.query.replace(nr,or)),this.fragment&&(this.fragment=this.fragment.replace(nr,or))};var nr=/%[0-9a-z]{2}/gi,ar=/[a-zA-Z0-9\-\._~]/,ir=/(.*@)?([^@:]*)(:.*)?/;function or(e){var t=unescape(e);return ar.test(t)?t:e.toUpperCase()}function sr(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function ur(e,t){if(null===e||"object"!=typeof e)return e;t=T.defaultValue(t,!1);var r,n,a=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=ur(n,t)),a[r]=n);return a}function cr(e,t,r){r=T.defaultValue(r,!1);var n,a,i,o={},s=T.defined(e),u=T.defined(t);if(s)for(n in e)e.hasOwnProperty(n)&&(a=e[n],u&&r&&"object"==typeof a&&t.hasOwnProperty(n)?(i=t[n],o[n]="object"==typeof i?cr(a,i,r):a):o[n]=a);if(u)for(n in t)t.hasOwnProperty(n)&&!o.hasOwnProperty(n)&&(i=t[n],o[n]=i);return o}function lr(e,t){var r;return"undefined"!=typeof document&&(r=document),lr._implementation(e,t,r)}tr.prototype.resolve=function(e){var t=new tr;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},tr.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},tr.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},lr._implementation=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("relative uri is required.");if(!T.defined(t)){if(void 0===r)return e;t=T.defaultValue(r.baseURI,r.location.href)}t=new tr(t);return new tr(e).resolve(t).toString()};var fr,dr=/^blob:/i;function hr(e){return N.Check.typeOf.string("uri",e),dr.test(e)}var pr=/^data:/i;function yr(e){return N.Check.typeOf.string("uri",e),pr.test(e)}var mr=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Cr=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function wr(e){e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT);var t=T.defaultValue(e.throttleByServer,!1),r=T.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=T.defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=T.defaultValue(e.type,Cr.OTHER),this.serverKey=void 0,this.state=mr.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Or(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a,i=r[n],o=i.indexOf(": ");0<o&&(a=i.substring(0,o),o=i.substring(o+2),t[a]=o)}return t}(this.responseHeaders))}function br(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function vr(e,t){return t-e}function gr(e){N.Check.typeOf.object("options",e),N.Check.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function xr(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}wr.prototype.cancel=function(){this.cancelled=!0},wr.prototype.clone=function(e){return T.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new wr(this)},Or.prototype.toString=function(){var e="Request has failed.";return T.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(br.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),br.prototype.addEventListener=function(e,t){N.Check.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},br.prototype.removeEventListener=function(e,t){N.Check.typeOf.func("listener",e);for(var r=this._listeners,n=this._scopes,a=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},br.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++){var a=e[n];T.defined(a)&&e[n].apply(t[n],arguments)}var i=this._toRemove;if(0<(r=i.length)){for(i.sort(vr),n=0;n<r;n++){var o=i[n];e.splice(o,1),t.splice(o,1)}i.length=0}this._insideRaiseEvent=!1},Object.defineProperties(gr.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){N.Check.typeOf.number.greaterThanOrEquals("maximumLength",e,0);var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),gr.prototype.reserve=function(e){e=T.defaultValue(e,this._length),this._array.length=e},gr.prototype.heapify=function(e){e=T.defaultValue(e,0);for(var t=this._length,r=this._comparator,n=this._array,a=-1,i=!0;i;){var o=2*(e+1),s=o-1,a=s<t&&r(n[s],n[e])<0?s:e;(a=o<t&&r(n[o],n[a])<0?o:a)!==e?(xr(n,a,e),e=a):i=!1}},gr.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},gr.prototype.insert=function(e){N.Check.defined("element",e);var t,r=this._array,n=this._comparator,a=this._maximumLength,i=this._length++;for(i<r.length?r[i]=e:r.push(e);0!==i;){var o=Math.floor((i-1)/2);if(!(n(r[i],r[o])<0))break;xr(r,i,o),i=o}return T.defined(a)&&this._length>a&&(t=r[a],this._length=a),t},gr.prototype.pop=function(e){if(e=T.defaultValue(e,0),0!==this._length){N.Check.typeOf.number.lessThan("index",e,this._length);var t=this._array,r=t[e];return xr(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}};var Er={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},kr=20,qr=new gr({comparator:function(e,t){return e.priority-t.priority}});qr.maximumLength=kr,qr.reserve(kr);var jr=[],_r={},Sr="undefined"!=typeof document?new tr(document.location.href):new tr,Tr=new br;function Mr(){}function Rr(e){T.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Dr(e){var t=T.defaultValue(Mr.requestsByServer[e],Mr.maximumRequestsPerServer);return _r[e]<t}function Ar(e){return e.state===mr.UNISSUED&&(e.state=mr.ISSUED,e.deferred=T.when.defer()),e.deferred.promise}function zr(e){var t,r,n=Ar(e);return e.state=mr.ACTIVE,jr.push(e),++Er.numberOfActiveRequests,++Er.numberOfActiveRequestsEver,++_r[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==mr.CANCELLED&&(t=r.deferred,--Er.numberOfActiveRequests,--_r[r.serverKey],Tr.raiseEvent(),r.state=mr.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==mr.CANCELLED&&(++Er.numberOfFailedRequests,--Er.numberOfActiveRequests,--_r[t.serverKey],Tr.raiseEvent(e),t.state=mr.FAILED,t.deferred.reject(e))})),n}function Ir(e){var t,r=e.state===mr.ACTIVE;e.state=mr.CANCELLED,++Er.numberOfCancelledRequests,T.defined(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Er.numberOfActiveRequests,--_r[e.serverKey],++Er.numberOfCancelledActiveRequests),T.defined(e.cancelFunction)&&e.cancelFunction()}Mr.maximumRequests=50,Mr.maximumRequestsPerServer=6,Mr.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Mr.throttleRequests=!0,Mr.debugShowStatistics=!1,Mr.requestCompletedEvent=Tr,Object.defineProperties(Mr,{statistics:{get:function(){return Er}},priorityHeapLength:{get:function(){return kr},set:function(e){if(e<kr)for(;qr.length>e;)Ir(qr.pop());kr=e,qr.maximumLength=e,qr.reserve(e)}}}),Mr.update=function(){for(var e,t=0,r=jr.length,n=0;n<r;++n)(e=jr[n]).cancelled&&Ir(e),e.state===mr.ACTIVE?0<t&&(jr[n-t]=e):++t;jr.length-=t;var a=qr.internalArray,i=qr.length;for(n=0;n<i;++n)Rr(a[n]);qr.resort();for(var o=Math.max(Mr.maximumRequests-jr.length,0),s=0;s<o&&0<qr.length;)!(e=qr.pop()).cancelled&&(!e.throttleByServer||Dr(e.serverKey))?(zr(e),++s):Ir(e);Mr.debugShowStatistics&&(0===Er.numberOfActiveRequests&&0<Er.lastNumberOfActiveRequests&&(0<Er.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Er.numberOfAttemptedRequests),Er.numberOfAttemptedRequests=0),0<Er.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Er.numberOfCancelledRequests),Er.numberOfCancelledRequests=0),0<Er.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Er.numberOfCancelledActiveRequests),Er.numberOfCancelledActiveRequests=0),0<Er.numberOfFailedRequests&&(console.log("Number of failed requests: "+Er.numberOfFailedRequests),Er.numberOfFailedRequests=0)),Er.lastNumberOfActiveRequests=Er.numberOfActiveRequests)},Mr.getServerKey=function(e){N.Check.typeOf.string("url",e);var t=new tr(e).resolve(Sr);t.normalize();e=t.authority;/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80"));t=_r[e];return T.defined(t)||(_r[e]=0),e},Mr.request=function(e){if(N.Check.typeOf.object("request",e),N.Check.typeOf.string("request.url",e.url),N.Check.typeOf.func("request.requestFunction",e.requestFunction),yr(e.url)||hr(e.url))return Tr.raiseEvent(),e.state=mr.RECEIVED,e.requestFunction();if(++Er.numberOfAttemptedRequests,T.defined(e.serverKey)||(e.serverKey=Mr.getServerKey(e.url)),!Mr.throttleRequests||!e.throttleByServer||Dr(e.serverKey)){if(!Mr.throttleRequests||!e.throttle)return zr(e);if(!(jr.length>=Mr.maximumRequests)){Rr(e);var t=qr.insert(e);if(T.defined(t)){if(t===e)return;Ir(t)}return Ar(e)}}},Mr.clearForSpecs=function(){for(;0<qr.length;)Ir(qr.pop());for(var e=jr.length,t=0;t<e;++t)Ir(jr[t]);jr.length=0,_r={},Er.numberOfAttemptedRequests=0,Er.numberOfActiveRequests=0,Er.numberOfCancelledRequests=0,Er.numberOfCancelledActiveRequests=0,Er.numberOfFailedRequests=0,Er.numberOfActiveRequestsEver=0,Er.lastNumberOfActiveRequests=0},Mr.numberOfActiveRequestsByServer=function(e){return _r[e]},Mr.requestHeap=qr;var Pr={},Ur={};Pr.add=function(e,t){if(!T.defined(e))throw new N.DeveloperError("host is required.");if(!T.defined(t)||t<=0)throw new N.DeveloperError("port is required to be greater than 0.");t=e.toLowerCase()+":"+t;T.defined(Ur[t])||(Ur[t]=!0)},Pr.remove=function(e,t){if(!T.defined(e))throw new N.DeveloperError("host is required.");if(!T.defined(t)||t<=0)throw new N.DeveloperError("port is required to be greater than 0.");t=e.toLowerCase()+":"+t;T.defined(Ur[t])&&delete Ur[t]},Pr.contains=function(e){if(!T.defined(e))throw new N.DeveloperError("url is required.");e=function(e){var t=new tr(e);if(t.normalize(),e=t.getAuthority(),T.defined(e)){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!T.defined(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!T.defined(e)||!T.defined(Ur[e]))},Pr.clear=function(){Ur={}};var Nr,Fr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function Vr(e,t,r,n){var a,i=e.query;if(!T.defined(i)||0===i.length)return 1;i=-1===i.indexOf("=")?((a={})[i]=void 0,a):function(e){if(!T.defined(e))throw new N.DeveloperError("queryString is required.");var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,a=r.length;n<a;++n){var i=r[n].split("="),o=decodeURIComponent(i[0]),s=i[1],s=T.defined(s)?decodeURIComponent(s):"",i=t[o];"string"==typeof i?t[o]=[i,s]:Array.isArray(i)?i.push(s):t[o]=s}return t}(i),t._queryParameters=r?Yr(i,t._queryParameters,n):i,e.query=void 0}function Lr(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||T.defined(r[t[0]])?e.query=function(e){if(!T.defined(e))throw new N.DeveloperError("obj is required.");var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],a=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var i=0,o=n.length;i<o;++i)r+=a+encodeURIComponent(n[i])+"&";else r+=a+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function Br(e,t){return T.defined(e)?T.defined(e.clone)?e.clone():ur(e):t}function Wr(e){if(e.state===mr.ISSUED||e.state===mr.ACTIVE)throw new V.RuntimeError("The Resource is already being fetched.");e.state=mr.UNISSUED,e.deferred=void 0}function Yr(e,t,r){if(!r)return cr(e,t);var n,a,i,o=ur(e,!0);for(n in t)t.hasOwnProperty(n)&&(a=o[n],i=t[n],T.defined(a)?(Array.isArray(a)||(a=o[n]=[a]),o[n]=a.concat(i)):o[n]=Array.isArray(i)?i.slice():i);return o}function Hr(e){e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT),N.Check.typeOf.string("options.url",(e="string"==typeof e?{url:e}:e).url),this._url=void 0,this._templateValues=Br(e.templateValues,{}),this._queryParameters=Br(e.queryParameters,{}),this.headers=Br(e.headers,{}),this.request=T.defaultValue(e.request,new wr),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=T.defaultValue(e.retryAttempts,0),this._retryCount=0;e=new tr(e.url);Vr(e,this,!0,!0),e.fragment=void 0,this._url=e.toString()}function Zr(e){var r=e.resource,n=e.flipY,a=e.preferImageBitmap,i=r.request;i.url=r.url,i.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var t=T.when.defer();return Hr._Implementations.createImage(i,e,t,n,a),t.promise};e=Mr.request(i);if(T.defined(e))return e.otherwise(function(t){return i.state!==mr.FAILED?T.when.reject(t):r.retryOnError(t).then(function(e){return e?(i.state=mr.UNISSUED,i.deferred=void 0,Zr({resource:r,flipY:n,preferImageBitmap:a})):T.when.reject(t)})})}Hr.createIfNeeded=function(e){return e instanceof Hr?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new Hr({url:e})},Hr.supportsImageBitmapOptions=function(){if(T.defined(Nr))return Nr;if("function"!=typeof createImageBitmap)return Nr=T.when.resolve(!1);return Nr=Hr.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(Hr,{isBlobSupported:{get:function(){return Fr}}}),Object.defineProperties(Hr.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){e=new tr(e);Vr(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return function(e){if(!T.defined(e))throw new N.DeveloperError("uri is required.");var t=new tr(e);return t.normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1)}(this._url)}},isDataUri:{get:function(){return yr(this._url)}},isBlobUri:{get:function(){return hr(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(fr=!T.defined(fr)?document.createElement("a"):fr).href=window.location.href;var t=fr.host,r=fr.protocol;return fr.href=e,fr.href=fr.href,r!==fr.protocol||t!==fr.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),Hr.prototype.toString=function(){return this.getUrlComponent(!0,!0)},Hr.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new tr(this._url);e&&Lr(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return T.defined(t)?encodeURIComponent(t):e});return r=t&&T.defined(this.proxy)?this.proxy.getURL(r):r},Hr.prototype.setQueryParameters=function(e,t){this._queryParameters=t?Yr(this._queryParameters,e,!1):Yr(e,this._queryParameters,!1)},Hr.prototype.appendQueryParameters=function(e){this._queryParameters=Yr(e,this._queryParameters,!0)},Hr.prototype.setTemplateValues=function(e,t){this._templateValues=t?cr(this._templateValues,e):cr(e,this._templateValues)},Hr.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,T.defined(e.url)&&(Vr(t=new tr(e.url),r,!0,T.defaultValue(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new tr(lr(this._url))).toString()),T.defined(e.queryParameters)&&(r._queryParameters=cr(e.queryParameters,r._queryParameters)),T.defined(e.templateValues)&&(r._templateValues=cr(e.templateValues,r.templateValues)),T.defined(e.headers)&&(r.headers=cr(e.headers,r.headers)),T.defined(e.proxy)&&(r.proxy=e.proxy),T.defined(e.request)&&(r.request=e.request),T.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),T.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},Hr.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return T.when(!1);var r=this;return T.when(t(this,e)).then(function(e){return++r._retryCount,e})},Hr.prototype.clone=function(e){return(e=!T.defined(e)?new Hr({url:this._url}):e)._url=this._url,e._queryParameters=ur(this._queryParameters),e._templateValues=ur(this._templateValues),e.headers=ur(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},Hr.prototype.getBaseUri=function(e){return function(e,t){if(!T.defined(e))throw new N.DeveloperError("uri is required.");var r="",n=e.lastIndexOf("/");return-1!==n&&(r=e.substring(0,n+1)),t&&(e=new tr(e),T.defined(e.query)&&(r+="?"+e.query),T.defined(e.fragment)&&(r+="#"+e.fragment)),r}(this.getUrlComponent(e),e)},Hr.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},Hr.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},Hr.fetchArrayBuffer=function(e){return new Hr(e).fetchArrayBuffer()},Hr.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},Hr.fetchBlob=function(e){return new Hr(e).fetchBlob()},Hr.prototype.fetchImage=function(e){e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT);var t=T.defaultValue(e.preferImageBitmap,!1),r=T.defaultValue(e.preferBlob,!1),n=T.defaultValue(e.flipY,!1);if(Wr(this.request),!Fr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return Zr({resource:this,flipY:n,preferImageBitmap:t});var a,i,o,s=this.fetchBlob();return T.defined(s)?Hr.supportsImageBitmapOptions().then(function(e){return a=e&&t,s}).then(function(e){if(T.defined(e)){if(o=e,a)return Hr.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return Zr({resource:i=new Hr({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(T.defined(e))return e.blob=o,a||window.URL.revokeObjectURL(i.url),e}).otherwise(function(e){return T.defined(i)&&window.URL.revokeObjectURL(i.url),e.blob=o,T.when.reject(e)}):void 0},Hr.fetchImage=function(e){return new Hr(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},Hr.prototype.fetchText=function(){return this.fetch({responseType:"text"})},Hr.fetchText=function(e){return new Hr(e).fetchText()},Hr.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(T.defined(e))return e.then(function(e){if(T.defined(e))return JSON.parse(e)})},Hr.fetchJson=function(e){return new Hr(e).fetchJson()},Hr.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},Hr.fetchXML=function(e){return new Hr(e).fetchXML()},Hr.prototype.fetchJsonp=function(e){var t;for(e=T.defaultValue(e,"callback"),Wr(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),T.defined(window[t]););return function r(n,a,i){var e={};e[a]=i;n.setQueryParameters(e);var o=n.request;o.url=n.url;o.requestFunction=function(){var t=T.when.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},Hr._Implementations.loadAndExecuteScript(n.url,i,t),t.promise};e=Mr.request(o);if(!T.defined(e))return;return e.otherwise(function(t){return o.state!==mr.FAILED?T.when.reject(t):n.retryOnError(t).then(function(e){return e?(o.state=mr.UNISSUED,o.deferred=void 0,r(n,a,i)):T.when.reject(t)})})}(this,e,t)},Hr.fetchJsonp=function(e){return new Hr(e).fetchJsonp(e.callbackParameterName)},Hr.prototype._makeRequest=function(s){var u=this;Wr(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){var e=s.responseType,t=cr(s.headers,u.headers),r=s.overrideMimeType,n=s.method,a=s.data,i=T.when.defer(),o=Hr._Implementations.loadWithXhr(u.url,e,n,a,t,i,r);return T.defined(o)&&T.defined(o.abort)&&(c.cancelFunction=function(){o.abort()}),i.promise};var e=Mr.request(c);if(T.defined(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==mr.FAILED?T.when.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=mr.UNISSUED,c.deferred=void 0,u.fetch(s)):T.when.reject(t)})})};var Xr=/^data:(.*?)(;base64)?,(.*)$/;function Jr(e,t){t=decodeURIComponent(t);return e?atob(t):t}function Gr(e,t){for(var r=Jr(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return t}function Qr(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}Hr.prototype.fetch=function(e){return(e=Br(e,{})).method="GET",this._makeRequest(e)},Hr.fetch=function(e){return new Hr(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.delete=function(e){return(e=Br(e,{})).method="DELETE",this._makeRequest(e)},Hr.delete=function(e){return new Hr(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},Hr.prototype.head=function(e){return(e=Br(e,{})).method="HEAD",this._makeRequest(e)},Hr.head=function(e){return new Hr(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.options=function(e){return(e=Br(e,{})).method="OPTIONS",this._makeRequest(e)},Hr.options=function(e){return new Hr(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.post=function(e,t){return N.Check.defined("data",e),(t=Br(t,{})).method="POST",t.data=e,this._makeRequest(t)},Hr.post=function(e){return new Hr(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.put=function(e,t){return N.Check.defined("data",e),(t=Br(t,{})).method="PUT",t.data=e,this._makeRequest(t)},Hr.put=function(e){return new Hr(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.patch=function(e,t){return N.Check.defined("data",e),(t=Br(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},Hr.patch=function(e){return new Hr(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(Hr._Implementations={}).createImage=function(i,o,s,u,c){var l=i.url;Hr.supportsImageBitmapOptions().then(function(e){if(!e||!c)return n=l,e=o,t=s,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(Pr.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=T.when.defer(),a=Hr._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return T.defined(a)&&T.defined(a.abort)&&(i.cancelFunction=function(){a.abort()}),n.promise.then(function(e){return T.defined(e)?Hr.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new V.RuntimeError("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},Hr.createImageBitmapFromBlob=function(e,t){return N.Check.defined("options",t),N.Check.typeOf.bool("options.flipY",t.flipY),N.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Kr="undefined"==typeof XMLHttpRequest;function $r(e){var t,r;e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=T.defaultValue(e.addNewLeapSeconds,!0),T.defined(e.data)?tn(this,e.data):T.defined(e.url)?(t=Hr.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){tn(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):tn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function en(e,t){return $t.compare(e.julianDate,t)}function tn(e,t){if(T.defined(t.columnNames))if(T.defined(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),o=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||a<0||i<0||o<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,f=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d=e._addNewLeapSeconds,h=0,p=l.length;h<p;h+=e._columnCount){var y,m=l[h+r],C=l[h+u],w=new $t(m+At.MODIFIED_JULIAN_DATE_DIFFERENCE,C,zt.TAI);f.push(w),d&&(C===c||!T.defined(c)||(m=_t(y=$t.leapSeconds,w,en))<0&&(w=new Dt(w,C),y.splice(~m,0,w)),c=C)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function rn(e,t,r,n,a){n*=r;a.xPoleWander=t[n+e._xPoleWanderRadiansColumn],a.yPoleWander=t[n+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function nn(e,t,r){return t+e*(r-t)}function an(e,t,r,n,a,i,o){var s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[a],c=t[i];if(u.equals(c)||n.equals(u))return rn(e,r,a,s,o),o;if(n.equals(c))return rn(e,r,i,s,o),o;var l=$t.secondsDifference(n,u)/$t.secondsDifference(c,u),f=a*s,t=i*s,u=r[f+e._ut1MinusUtcSecondsColumn],a=r[t+e._ut1MinusUtcSecondsColumn],i=a-u;return!(.5<i||i<-.5)||(s=r[f+e._taiMinusUtcSecondsColumn])!==(i=r[t+e._taiMinusUtcSecondsColumn])&&(c.equals(n)?u=a:a-=i-s),o.xPoleWander=nn(l,r[f+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),o.yPoleWander=nn(l,r[f+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),o.xPoleOffset=nn(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=nn(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=nn(l,u,a),o}function on(e,t,r){this.heading=T.defaultValue(e,0),this.pitch=T.defaultValue(t,0),this.roll=T.defaultValue(r,0)}Hr._Implementations.loadWithXhr=function(e,a,i,t,r,o,n){var s=Xr.exec(e);if(null===s){if(Kr)return u=e,c=a,l=i,f=r,d=o,h=require("url").parse(u),u="https:"===h.protocol?require("https"):require("http"),p=require("zlib"),f={protocol:h.protocol,hostname:h.hostname,port:h.port,path:h.path,query:h.query,method:l,headers:f},void u.request(f).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?d.reject(new Or(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?p.gunzip(e,function(e,t){e?d.reject(new V.RuntimeError("Error decompressing response.")):d.resolve(Qr(t,c))}):d.resolve(Qr(e,c))}))}).on("error",function(e){d.reject(new Or)}).end();var u,c,l,f,d,h,p,y=new XMLHttpRequest;if(Pr.contains(e)&&(y.withCredentials=!0),y.open(i,e,!0),T.defined(n)&&T.defined(y.overrideMimeType)&&y.overrideMimeType(n),T.defined(r))for(var m in r)r.hasOwnProperty(m)&&y.setRequestHeader(m,r[m]);T.defined(a)&&(y.responseType=a);var C=!1;return"string"==typeof e&&(C=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),y.onload=function(){if(!(y.status<200||300<=y.status)||C&&0===y.status){var e=y.response,t=y.responseType;if("HEAD"===i||"OPTIONS"===i){var r=y.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void o.resolve(n)}if(204===y.status)o.resolve();else if(!T.defined(e)||T.defined(a)&&t!==a)if("json"===a&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===t||"document"===t)&&T.defined(y.responseXML)&&y.responseXML.hasChildNodes()?o.resolve(y.responseXML):""!==t&&"text"!==t||!T.defined(y.responseText)?o.reject(new V.RuntimeError("Invalid XMLHttpRequest response type.")):o.resolve(y.responseText);else o.resolve(e)}else o.reject(new Or(y.status,y.response,y.getAllResponseHeaders()))},y.onerror=function(e){o.reject(new Or)},y.send(t),y}o.resolve(function(e,t){t=T.defaultValue(t,"");var r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return Jr(n,a);case"arraybuffer":return Gr(n,a);case"blob":var i=Gr(n,a);return new Blob([i],{type:r});case"document":return(new DOMParser).parseFromString(Jr(n,a),r);case"json":return JSON.parse(Jr(n,a));default:throw new N.DeveloperError("Unhandled responseType: "+t)}}(s,a))},Hr._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=T.when.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(Hr._DefaultImplementations={}).createImage=Hr._Implementations.createImage,Hr._DefaultImplementations.loadWithXhr=Hr._Implementations.loadWithXhr,Hr._DefaultImplementations.loadAndExecuteScript=Hr._Implementations.loadAndExecuteScript,Hr.DEFAULT=Object.freeze(new Hr({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),$r.NONE=Object.freeze({getPromiseToLoad:function(){return T.when.resolve()},compute:function(e,t){return T.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new St(0,0,0,0,0),t}}),$r.prototype.getPromiseToLoad=function(){return T.when(this._downloadPromise)},$r.prototype.compute=function(e,t){if(T.defined(this._samples)){if(T.defined(t)||(t=new St(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,a=0,i=0;if(T.defined(n)){var o=r[n],s=r[n+1],u=$t.lessThanOrEquals(o,e),c=!T.defined(s),o=c||$t.greaterThanOrEquals(s,e);if(u&&o)return a=n,!c&&s.equals(e)&&++a,an(this,r,this._samples,e,a,i=a+1,t),t}s=_t(r,e,$t.compare,this._dateColumn);return 0<=s?(s<r.length-1&&r[s+1].equals(e)&&++s,i=a=s):(a=(i=~s)-1)<0&&(a=0),this._lastIndex=a,an(this,r,this._samples,e,a,i,t),t}if(T.defined(this._dataError))throw new V.RuntimeError(this._dataError)},on.fromQuaternion=function(e,t){if(!T.defined(e))throw new N.DeveloperError("quaternion is required");T.defined(t)||(t=new on);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,i),t.roll=Math.atan2(a,n),t.pitch=-F.CesiumMath.asinClamped(r),t},on.fromDegrees=function(e,t,r,n){if(!T.defined(e))throw new N.DeveloperError("heading is required");if(!T.defined(t))throw new N.DeveloperError("pitch is required");if(!T.defined(r))throw new N.DeveloperError("roll is required");return(n=!T.defined(n)?new on:n).heading=e*F.CesiumMath.RADIANS_PER_DEGREE,n.pitch=t*F.CesiumMath.RADIANS_PER_DEGREE,n.roll=r*F.CesiumMath.RADIANS_PER_DEGREE,n},on.clone=function(e,t){if(T.defined(e))return T.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new on(e.heading,e.pitch,e.roll)},on.equals=function(e,t){return e===t||T.defined(e)&&T.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},on.equalsEpsilon=function(e,t,r,n){return e===t||T.defined(e)&&T.defined(t)&&F.CesiumMath.equalsEpsilon(e.heading,t.heading,r,n)&&F.CesiumMath.equalsEpsilon(e.pitch,t.pitch,r,n)&&F.CesiumMath.equalsEpsilon(e.roll,t.roll,r,n)},on.prototype.clone=function(e){return on.clone(this,e)},on.prototype.equals=function(e){return on.equals(this,e)},on.prototype.equalsEpsilon=function(e,t,r){return on.equalsEpsilon(this,e,t,r)},on.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var sn,un,cn,ln=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function fn(e){return"undefined"==typeof document?e:((sn=!T.defined(sn)?document.createElement("a"):sn).href=e,sn.href=sn.href,sn.href)}function dn(){if(T.defined(un))return un;var e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&T.defined(define.amd)&&!define.amd.toUrlUndefined&&T.defined(require.toUrl)?lr("..",yn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=ln.exec(n);if(null!==n)return n[1]}}();if(!T.defined(e))throw new N.DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(un=new Hr({url:fn(e)})).appendForwardSlash(),un}function hn(e){return fn(require.toUrl("../"+e))}function pn(e){return dn().getDerivedResource({url:e}).url}function yn(e){return(cn=!T.defined(cn)?"object"==typeof define&&T.defined(define.amd)&&!define.amd.toUrlUndefined&&T.defined(require.toUrl)?hn:pn:cn)(e)}function mn(e,t,r){this.x=e,this.y=t,this.s=r}function Cn(e){e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=Hr.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=T.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=T.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new $t(this._sampleZeroJulianEphemerisDate,0,zt.TAI),this._stepSizeDays=T.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=T.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=T.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){r[i]=a,n[i]=i*this._stepSizeDays;for(var o=0;o<=t;++o)o!==i&&(r[i]*=i-o);r[i]=1/r[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}yn._cesiumScriptRegex=ln,yn._buildModuleUrlFromBaseUrl=pn,yn._clearBaseResource=function(){un=void 0},yn.setBaseUrl=function(e){un=Hr.DEFAULT.getDerivedResource({url:e})},yn.getCesiumBaseUrl=dn;var wn=new $t(0,0,zt.TAI);function On(e,t,r){var n=wn;return n.dayNumber=t,n.secondsOfDay=r,$t.daysDifference(n,e._sampleZeroDateTT)}function bn(o,s){if(o._chunkDownloadsInProgress[s])return o._chunkDownloadsInProgress[s];var u=T.when.defer();o._chunkDownloadsInProgress[s]=u;var e=o._xysFileUrlTemplate,e=T.defined(e)?e.getDerivedResource({templateValues:{0:s}}):new Hr({url:yn("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")});return T.when(e.fetchJson(),function(e){o._chunkDownloadsInProgress[s]=!1;for(var t=o._samples,r=e.samples,n=s*o._samplesPerXysFile*3,a=0,i=r.length;a<i;++a)t[n+a]=r[a];u.resolve()}),u.promise}Cn.prototype.preload=function(e,t,r,n){t=On(this,e,t),n=On(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0,n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,a=n/this._samplesPerXysFile|0,i=[],o=t;o<=a;++o)i.push(bn(this,o));return T.when.all(i)},Cn.prototype.computeXysRadians=function(e,t,r){var n=On(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var a=this._interpolationOrder,i=e-(a/2|0),t=(i=i<0?0:i)+a;t>=this._totalSamples&&(i=(t=this._totalSamples-1)-a)<0&&(i=0);var e=!1,o=this._samples;if(T.defined(o[3*i])||(bn(this,i/this._samplesPerXysFile|0),e=!0),T.defined(o[3*t])||(bn(this,t/this._samplesPerXysFile|0),e=!0),!e){T.defined(r)?(r.x=0,r.y=0,r.s=0):r=new mn(0,0,0);for(var s,u=n-i*this._stepSizeDays,c=this._work,l=this._denominators,f=this._coef,d=this._xTable,h=0;h<=a;++h)c[h]=u-d[h];for(h=0;h<=a;++h){for(f[h]=1,s=0;s<=a;++s)s!==h&&(f[h]*=c[s]);f[h]*=l[h];var p=3*(i+h);r.x+=f[h]*o[p++],r.y+=f[h]*o[p++],r.s+=f[h]*o[p]}return r}}}};var vn={},gn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},xn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},En={},kn={east:new S.Cartesian3,north:new S.Cartesian3,up:new S.Cartesian3,west:new S.Cartesian3,south:new S.Cartesian3,down:new S.Cartesian3},qn=new S.Cartesian3,jn=new S.Cartesian3,_n=new S.Cartesian3;vn.localFrameToFixedFrameGenerator=function(a,i){if(!gn.hasOwnProperty(a)||!gn[a].hasOwnProperty(i))throw new N.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var e,o=gn[a][i],t=a+i;return T.defined(En[t])?e=En[t]:En[t]=e=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("origin is required.");var n;return T.defined(r)||(r=new W),S.Cartesian3.equalsEpsilon(e,S.Cartesian3.ZERO,F.CesiumMath.EPSILON14)?(S.Cartesian3.unpack(xn[a],0,qn),S.Cartesian3.unpack(xn[i],0,jn),S.Cartesian3.unpack(xn[o],0,_n)):F.CesiumMath.equalsEpsilon(e.x,0,F.CesiumMath.EPSILON14)&&F.CesiumMath.equalsEpsilon(e.y,0,F.CesiumMath.EPSILON14)?(n=F.CesiumMath.sign(e.z),S.Cartesian3.unpack(xn[a],0,qn),"east"!==a&&"west"!==a&&S.Cartesian3.multiplyByScalar(qn,n,qn),S.Cartesian3.unpack(xn[i],0,jn),"east"!==i&&"west"!==i&&S.Cartesian3.multiplyByScalar(jn,n,jn),S.Cartesian3.unpack(xn[o],0,_n),"east"!==o&&"west"!==o&&S.Cartesian3.multiplyByScalar(_n,n,_n)):((t=T.defaultValue(t,S.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,kn.up),n=kn.up,(t=kn.east).x=-e.y,t.y=e.x,t.z=0,S.Cartesian3.normalize(t,kn.east),S.Cartesian3.cross(n,t,kn.north),S.Cartesian3.multiplyByScalar(kn.up,-1,kn.down),S.Cartesian3.multiplyByScalar(kn.east,-1,kn.west),S.Cartesian3.multiplyByScalar(kn.north,-1,kn.south),qn=kn[a],jn=kn[i],_n=kn[o]),r[0]=qn.x,r[1]=qn.y,r[2]=qn.z,r[3]=0,r[4]=jn.x,r[5]=jn.y,r[6]=jn.z,r[7]=0,r[8]=_n.x,r[9]=_n.y,r[10]=_n.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},e},vn.eastNorthUpToFixedFrame=vn.localFrameToFixedFrameGenerator("east","north"),vn.northEastDownToFixedFrame=vn.localFrameToFixedFrameGenerator("north","east"),vn.northUpEastToFixedFrame=vn.localFrameToFixedFrameGenerator("north","up"),vn.northWestUpToFixedFrame=vn.localFrameToFixedFrameGenerator("north","west");var Sn=new $e,Tn=new S.Cartesian3(1,1,1),Mn=new W;vn.headingPitchRollToFixedFrame=function(e,t,r,n,a){N.Check.typeOf.object("HeadingPitchRoll",t),n=T.defaultValue(n,vn.eastNorthUpToFixedFrame);t=$e.fromHeadingPitchRoll(t,Sn),t=W.fromTranslationQuaternionRotationScale(S.Cartesian3.ZERO,t,Tn,Mn);return a=n(e,r,a),W.multiply(a,t,a)};var Rn=new W,Dn=new L;vn.headingPitchRollQuaternion=function(e,t,r,n,a){N.Check.typeOf.object("HeadingPitchRoll",t);n=vn.headingPitchRollToFixedFrame(e,t,r,n,Rn),n=W.getMatrix3(n,Dn);return $e.fromRotationMatrix(n,a)};var An=new S.Cartesian3(1,1,1),zn=new S.Cartesian3,In=new W,Pn=new W,Un=new L,Nn=new $e;vn.fixedFrameToHeadingPitchRoll=function(e,t,r,n){N.Check.defined("transform",e),t=T.defaultValue(t,S.Ellipsoid.WGS84),r=T.defaultValue(r,vn.eastNorthUpToFixedFrame),T.defined(n)||(n=new on);var a=W.getTranslation(e,zn);if(S.Cartesian3.equals(a,S.Cartesian3.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=W.inverseTransformation(r(a,t,In),In),e=W.setScale(e,An,Pn),e=W.setTranslation(e,S.Cartesian3.ZERO,e),t=W.multiply(t,e,t),t=$e.fromRotationMatrix(W.getMatrix3(t,Un),Nn),t=$e.normalize(t,t);return on.fromQuaternion(t,n)};var Fn=F.CesiumMath.TWO_PI/86400,Vn=new $t;vn.computeTemeToPseudoFixedMatrix=function(e,t){if(!T.defined(e))throw new N.DeveloperError("date is required.");var r=(Vn=$t.addSeconds(e,-$t.computeTaiMinusUtc(e),Vn)).dayNumber,n=Vn.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/At.DAYS_PER_JULIAN_CENTURY:(e-.5)/At.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*Fn%F.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*At.SECONDS_PER_DAY)%At.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return T.defined(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new L(n,r,0,-r,n,0,0,0,1)},vn.iau2006XysData=new Cn,vn.earthOrientationParameters=$r.NONE;var Ln=32.184;vn.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+Ln,n=e.stop.dayNumber,e=e.stop.secondsOfDay+Ln,n=vn.iau2006XysData.preload(t,r,n,e),e=vn.earthOrientationParameters.getPromiseToLoad();return T.when.all([n,e])},vn.computeIcrfToFixedMatrix=function(e,t){if(!T.defined(e))throw new N.DeveloperError("date is required.");T.defined(t)||(t=new L);e=vn.computeFixedToIcrfMatrix(e,t);if(T.defined(e))return L.transpose(e,t)};var Bn=new mn(0,0,0),Wn=new St(0,0,0,0,0),Yn=new L,Hn=new L;vn.computeFixedToIcrfMatrix=function(e,t){if(!T.defined(e))throw new N.DeveloperError("date is required.");T.defined(t)||(t=new L);var r=vn.earthOrientationParameters.compute(e,Wn);if(T.defined(r)){var n=e.dayNumber,a=e.secondsOfDay+Ln,i=vn.iau2006XysData.computeXysRadians(n,a,Bn);if(T.defined(i)){var o=i.x+r.xPoleOffset,s=i.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-o*o-s*s)),c=Yn;c[0]=1-u*o*o,c[3]=-u*o*s,c[6]=o,c[1]=-u*o*s,c[4]=1-u*s*s,c[7]=s,c[2]=-o,c[5]=-s,c[8]=1-u*(o*o+s*s);o=L.fromRotationZ(-i.s,Hn),s=L.multiply(c,o,Yn),i=e.dayNumber,c=(e.secondsOfDay-$t.computeTaiMinusUtc(e)+r.ut1MinusUtc)/At.SECONDS_PER_DAY,o=(o=.779057273264+c+.00273781191135448*(i-2451545+c))%1*F.CesiumMath.TWO_PI,e=L.fromRotationZ(o,Hn),i=L.multiply(s,e,Yn),c=Math.cos(r.xPoleWander),o=Math.cos(r.yPoleWander),s=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+a/At.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*F.CesiumMath.RADIANS_PER_DEGREE/3600,a=Math.cos(n),r=Math.sin(n),n=Hn;return n[0]=c*a,n[1]=c*r,n[2]=s,n[3]=-o*r+e*s*a,n[4]=o*a+e*s*r,n[5]=-e*c,n[6]=-e*r-o*s*a,n[7]=e*a-o*s*r,n[8]=o*c,L.multiply(i,n,t)}}};var Zn=new B;vn.pointToWindowCoordinates=function(e,t,r,n){return(n=vn.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},vn.pointToGLWindowCoordinates=function(e,t,r,n){if(!T.defined(e))throw new N.DeveloperError("modelViewProjectionMatrix is required.");if(!T.defined(t))throw new N.DeveloperError("viewportTransformation is required.");if(!T.defined(r))throw new N.DeveloperError("point is required.");T.defined(n)||(n=new S.Cartesian2);var a=Zn;return W.multiplyByVector(e,B.fromElements(r.x,r.y,r.z,1,a),a),B.multiplyByScalar(a,1/a.w,a),W.multiplyByVector(t,a,a),S.Cartesian2.fromCartesian4(a,n)};var Xn=new S.Cartesian3,Jn=new S.Cartesian3,Gn=new S.Cartesian3;vn.rotationMatrixFromPositionVelocity=function(e,t,r,n){if(!T.defined(e))throw new N.DeveloperError("position is required.");if(!T.defined(t))throw new N.DeveloperError("velocity is required.");r=T.defaultValue(r,S.Ellipsoid.WGS84).geodeticSurfaceNormal(e,Xn),e=S.Cartesian3.cross(t,r,Jn);S.Cartesian3.equalsEpsilon(e,S.Cartesian3.ZERO,F.CesiumMath.EPSILON6)&&(e=S.Cartesian3.clone(S.Cartesian3.UNIT_X,e));r=S.Cartesian3.cross(e,t,Gn);return S.Cartesian3.normalize(r,r),S.Cartesian3.cross(t,r,e),S.Cartesian3.negate(e,e),S.Cartesian3.normalize(e,e),(n=!T.defined(n)?new L:n)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var Qn=new W(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Kn=new S.Cartographic,$n=new S.Cartesian3,ea=new S.Cartesian3,ta=new L,ra=new W,na=new W;vn.basisTo2D=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("projection is required.");if(!T.defined(t))throw new N.DeveloperError("matrix is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");var n=W.getTranslation(t,ea),a=e.ellipsoid,i=a.cartesianToCartographic(n,Kn),i=e.project(i,$n);S.Cartesian3.fromElements(i.z,i.x,i.y,i);a=vn.eastNorthUpToFixedFrame(n,a,ra),a=W.inverseTransformation(a,na),t=W.getMatrix3(t,ta),t=W.multiplyByMatrix3(a,t,r);return W.multiply(Qn,t,r),W.setTranslation(r,i,r),r},vn.wgs84To2DModelMatrix=function(e,t,r){if(!T.defined(e))throw new N.DeveloperError("projection is required.");if(!T.defined(t))throw new N.DeveloperError("center is required.");if(!T.defined(r))throw new N.DeveloperError("result is required.");var n=e.ellipsoid,a=vn.eastNorthUpToFixedFrame(t,n,ra),a=W.inverseTransformation(a,na),t=n.cartesianToCartographic(t,Kn),t=e.project(t,$n);S.Cartesian3.fromElements(t.z,t.x,t.y,t);t=W.fromTranslation(t,ra);return W.multiply(Qn,a,r),W.multiply(t,r,r),r},e.BoundingSphere=M,e.Cartesian4=B,e.FeatureDetection=Ke,e.GeographicProjection=t,e.Intersect=a,e.Interval=i,e.Matrix3=L,e.Matrix4=W,e.Quaternion=$e,e.Resource=Hr,e.Transforms=vn,e.buildModuleUrl=yn});
//# sourceMappingURL=Transforms-f1816abc.js.map
