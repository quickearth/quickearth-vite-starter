define(["exports","./AttributeCompression-d1cd1d9c","./Cartesian2-e9bb1bb3","./Check-5e798bbf","./when-208fe5b0","./Math-56f06cd5","./Transforms-b2c3e401","./ComponentDatatype-b3120730","./EncodedCartesian3-099fd63d","./GeometryAttribute-dddfbf98","./IndexDatatype-4d4b60a0","./IntersectionTests-19697198","./Plane-6fbc10a1"],function(e,g,q,x,R,O,L,P,d,I,D,z,i){"use strict";var w=new q.Cartesian3,T=new q.Cartesian3,A=new q.Cartesian3;var o={calculateACMR:function(e){var t=(e=R.defaultValue(e,R.defaultValue.EMPTY_OBJECT)).indices,r=e.maximumIndex,i=R.defaultValue(e.cacheSize,24);if(!R.defined(t))throw new x.DeveloperError("indices is required.");var a=t.length;if(a<3||a%3!=0)throw new x.DeveloperError("indices length must be a multiple of three.");if(r<=0)throw new x.DeveloperError("maximumIndex must be greater than zero.");if(i<3)throw new x.DeveloperError("cacheSize must be greater than two.");if(!R.defined(r))for(var r=0,n=0,o=t[n];n<a;)r<o&&(r=o),o=t[++n];for(var s=[],u=0;u<r+1;u++)s[u]=0;for(var p=i+1,d=0;d<a;++d)p-s[t[d]]>i&&(s[t[d]]=p,++p);return(p-i+1)/(a/3)}};o.tipsify=function(e){var t=(e=R.defaultValue(e,R.defaultValue.EMPTY_OBJECT)).indices,r=e.maximumIndex,i=R.defaultValue(e.cacheSize,24);function a(e,t,r,i,a,n,o){for(var s,u=-1,p=-1,d=0;d<r.length;){var l=r[d];i[l].numLiveTriangles&&(s=0,(p<(s=a-i[l].timeStamp+2*i[l].numLiveTriangles<=t?a-i[l].timeStamp:s)||-1===p)&&(p=s,u=l)),++d}return-1===u?function(e,t,r){for(;1<=t.length;){var i=t[t.length-1];if(t.splice(t.length-1,1),0<e[i].numLiveTriangles)return i}for(;v<r;){if(0<e[v].numLiveTriangles)return++v-1;++v}return-1}(i,n,o):u}if(!R.defined(t))throw new x.DeveloperError("indices is required.");e=t.length;if(e<3||e%3!=0)throw new x.DeveloperError("indices length must be a multiple of three.");if(r<=0)throw new x.DeveloperError("maximumIndex must be greater than zero.");if(i<3)throw new x.DeveloperError("cacheSize must be greater than two.");var n=0,o=t[E=0],s=e;if(R.defined(r))n=r+1;else{for(;E<s;)n<o&&(n=o),o=t[++E];if(-1===n)return 0;++n}for(var u=[],p=0;p<n;p++)u[p]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};for(var d=E=0;E<s;)u[t[E]].vertexTriangles.push(d),++u[t[E]].numLiveTriangles,u[t[E+1]].vertexTriangles.push(d),++u[t[E+1]].numLiveTriangles,u[t[E+2]].vertexTriangles.push(d),++u[t[E+2]].numLiveTriangles,++d,E+=3;var l,f=0,m=i+1,v=1,y=[],c=[],h=0,C=[],b=e/3,w=[];for(p=0;p<b;p++)w[p]=!1;for(;-1!==f;){for(var g,y=[],T=(g=u[f]).vertexTriangles.length,A=0;A<T;++A)if(!w[d=g.vertexTriangles[A]]){w[d]=!0;for(var E=d+d+d,D=0;D<3;++D)l=t[E],y.push(l),c.push(l),C[h]=l,++h,--(l=u[l]).numLiveTriangles,m-l.timeStamp>i&&(l.timeStamp=m,++m),++E}f=a(0,i,y,u,m,c,n)}return C};var t={};function s(e,t,r,i,a){e[t++]=r,e[t++]=i,e[t++]=i,e[t++]=a,e[t++]=a,e[t]=r}function v(e){var t,r,i={};for(t in e)e.hasOwnProperty(t)&&R.defined(e[t])&&R.defined(e[t].values)&&(r=e[t],i[t]=new I.GeometryAttribute({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return i}t.toWireframe=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");var t=e.indices;if(R.defined(t)){switch(e.primitiveType){case I.PrimitiveType.TRIANGLES:e.indices=function(e){for(var t=e.length,r=D.IndexDatatype.createTypedArray(t,t/3*6),i=0,a=0;a<t;a+=3,i+=6)s(r,i,e[a],e[a+1],e[a+2]);return r}(t);break;case I.PrimitiveType.TRIANGLE_STRIP:e.indices=function(e){var t=e.length;if(3<=t){var r=D.IndexDatatype.createTypedArray(t,6*(t-2));s(r,0,e[0],e[1],e[2]);for(var i=6,a=3;a<t;++a,i+=6)s(r,i,e[a-1],e[a],e[a-2]);return r}return new Uint16Array}(t);break;case I.PrimitiveType.TRIANGLE_FAN:e.indices=function(e){if(0<e.length){for(var t=e.length-1,r=D.IndexDatatype.createTypedArray(t,6*(t-1)),i=e[0],a=0,n=1;n<t;++n,a+=6)s(r,a,i,e[n],e[n+1]);return r}return new Uint16Array}(t);break;default:throw new x.DeveloperError("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}e.primitiveType=I.PrimitiveType.LINES}return e},t.createLineSegmentsForVectors=function(e,t,r){if(t=R.defaultValue(t,"normal"),!R.defined(e))throw new x.DeveloperError("geometry is required.");if(!R.defined(e.attributes.position))throw new x.DeveloperError("geometry.attributes.position is required.");if(!R.defined(e.attributes[t]))throw new x.DeveloperError("geometry.attributes must have an attribute with the same name as the attributeName parameter, "+t+".");r=R.defaultValue(r,1e4);for(var i,a=e.attributes.position.values,n=e.attributes[t].values,o=a.length,s=new Float64Array(2*o),u=0,p=0;p<o;p+=3)s[u++]=a[p],s[u++]=a[p+1],s[u++]=a[p+2],s[u++]=a[p]+n[p]*r,s[u++]=a[p+1]+n[p+1]*r,s[u++]=a[p+2]+n[p+2]*r;e=e.boundingSphere;return R.defined(e)&&(i=new L.BoundingSphere(e.center,e.radius+r)),new I.Geometry({attributes:{position:new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:I.PrimitiveType.LINES,boundingSphere:i})},t.createAttributeLocations=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");for(var t,r=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],i=e.attributes,a={},n=0,o=r.length,s=0;s<o;++s){var u=r[s];R.defined(i[u])&&(a[u]=n++)}for(t in i)i.hasOwnProperty(t)&&!R.defined(a[t])&&(a[t]=n++);return a},t.reorderForPreVertexCache=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");var t=I.Geometry.computeNumberOfVertices(e),r=e.indices;if(R.defined(r)){for(var i=new Int32Array(t),a=0;a<t;a++)i[a]=-1;for(var n,o=r,s=o.length,u=D.IndexDatatype.createTypedArray(t,s),p=0,d=0,l=0;p<s;)-1!==(n=i[o[p]])?u[d]=n:(i[n=o[p]]=l,u[d]=l,++l),++p,++d;e.indices=u;var f,m=e.attributes;for(f in m)if(m.hasOwnProperty(f)&&R.defined(m[f])&&R.defined(m[f].values)){for(var v=m[f],y=v.values,c=0,h=v.componentsPerAttribute,C=P.ComponentDatatype.createTypedArray(v.componentDatatype,l*h);c<t;){var b=i[c];if(-1!==b)for(var w=0;w<h;w++)C[h*b+w]=y[h*c+w];++c}v.values=C}}return e},t.reorderForPostVertexCache=function(e,t){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");var r=e.indices;if(e.primitiveType===I.PrimitiveType.TRIANGLES&&R.defined(r)){for(var i=r.length,a=0,n=0;n<i;n++)r[n]>a&&(a=r[n]);e.indices=o.tipsify({indices:r,maximumIndex:a,cacheSize:t})}return e},t.fitToUnsignedShortIndices=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");if(R.defined(e.indices)&&e.primitiveType!==I.PrimitiveType.TRIANGLES&&e.primitiveType!==I.PrimitiveType.LINES&&e.primitiveType!==I.PrimitiveType.POINTS)throw new x.DeveloperError("geometry.primitiveType must equal to PrimitiveType.TRIANGLES, PrimitiveType.LINES, or PrimitiveType.POINTS.");var t=[],r=I.Geometry.computeNumberOfVertices(e);if(R.defined(e.indices)&&r>=O.CesiumMath.SIXTY_FOUR_KILOBYTES){var i,a=[],n=[],o=0,s=v(e.attributes),u=e.indices,p=u.length;e.primitiveType===I.PrimitiveType.TRIANGLES?i=3:e.primitiveType===I.PrimitiveType.LINES?i=2:e.primitiveType===I.PrimitiveType.POINTS&&(i=1);for(var d=0;d<p;d+=i){for(var l=0;l<i;++l){var f=u[d+l],m=a[f];R.defined(m)||(m=o++,a[f]=m,function(e,t,r){for(var i in t)if(t.hasOwnProperty(i)&&R.defined(t[i])&&R.defined(t[i].values))for(var a=t[i],n=0;n<a.componentsPerAttribute;++n)e[i].values.push(a.values[r*a.componentsPerAttribute+n])}(s,e.attributes,f)),n.push(m)}o+i>=O.CesiumMath.SIXTY_FOUR_KILOBYTES&&(t.push(new I.Geometry({attributes:s,indices:n,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),a=[],n=[],o=0,s=v(e.attributes))}0!==n.length&&t.push(new I.Geometry({attributes:s,indices:n,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var m=new q.Cartesian3,y=new q.Cartographic;t.projectTo2D=function(e,t,r,i,a){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");if(!R.defined(t))throw new x.DeveloperError("attributeName is required.");if(!R.defined(r))throw new x.DeveloperError("attributeName3D is required.");if(!R.defined(i))throw new x.DeveloperError("attributeName2D is required.");if(!R.defined(e.attributes[t]))throw new x.DeveloperError("geometry must have attribute matching the attributeName argument: "+t+".");if(e.attributes[t].componentDatatype!==P.ComponentDatatype.DOUBLE)throw new x.DeveloperError("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");for(var n=e.attributes[t],o=(a=R.defined(a)?a:new L.GeographicProjection).ellipsoid,s=n.values,u=new Float64Array(s.length),p=0,d=0;d<s.length;d+=3){var l=q.Cartesian3.fromArray(s,d,m),f=o.cartesianToCartographic(l,y);if(!R.defined(f))throw new x.DeveloperError("Could not project point ("+l.x+", "+l.y+", "+l.z+") to 2D.");f=a.project(f,m);u[p++]=f.x,u[p++]=f.y,u[p++]=f.z}return e.attributes[r]=n,e.attributes[i]=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};var l={high:0,low:0};t.encodeAttribute=function(e,t,r,i){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");if(!R.defined(t))throw new x.DeveloperError("attributeName is required.");if(!R.defined(r))throw new x.DeveloperError("attributeHighName is required.");if(!R.defined(i))throw new x.DeveloperError("attributeLowName is required.");if(!R.defined(e.attributes[t]))throw new x.DeveloperError("geometry must have attribute matching the attributeName argument: "+t+".");if(e.attributes[t].componentDatatype!==P.ComponentDatatype.DOUBLE)throw new x.DeveloperError("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");for(var a=e.attributes[t],n=a.values,o=n.length,s=new Float32Array(o),u=new Float32Array(o),p=0;p<o;++p)d.EncodedCartesian3.encode(n[p],l),s[p]=l.high,u[p]=l.low;a=a.componentsPerAttribute;return e.attributes[r]=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:a,values:s}),e.attributes[i]=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:a,values:u}),delete e.attributes[t],e};var n=new q.Cartesian3;function a(e,t){if(R.defined(t))for(var r=t.values,i=r.length,a=0;a<i;a+=3)q.Cartesian3.unpack(r,a,n),L.Matrix4.multiplyByPoint(e,n,n),q.Cartesian3.pack(n,r,a)}function u(e,t){if(R.defined(t))for(var r=t.values,i=r.length,a=0;a<i;a+=3)q.Cartesian3.unpack(r,a,n),L.Matrix3.multiplyByVector(e,n,n),n=q.Cartesian3.normalize(n,n),q.Cartesian3.pack(n,r,a)}var p=new L.Matrix4,f=new L.Matrix3;t.transformToWorldCoordinates=function(e){if(!R.defined(e))throw new x.DeveloperError("instance is required.");var t=e.modelMatrix;if(L.Matrix4.equals(t,L.Matrix4.IDENTITY))return e;var r=e.geometry.attributes;a(t,r.position),a(t,r.prevPosition),a(t,r.nextPosition),(R.defined(r.normal)||R.defined(r.tangent)||R.defined(r.bitangent))&&(L.Matrix4.inverse(t,p),L.Matrix4.transpose(p,p),L.Matrix4.getMatrix3(p,f),u(f,r.normal),u(f,r.tangent),u(f,r.bitangent));r=e.geometry.boundingSphere;return R.defined(r)&&(e.geometry.boundingSphere=L.BoundingSphere.transform(r,t,r)),e.modelMatrix=L.Matrix4.clone(L.Matrix4.IDENTITY),e};var S=new q.Cartesian3;function c(e,t){var r,i,a=e.length,n=e[0].modelMatrix,o=R.defined(e[0][t].indices),s=e[0][t].primitiveType;for(m=1;m<a;++m){if(!L.Matrix4.equals(e[m].modelMatrix,n))throw new x.DeveloperError("All instances must have the same modelMatrix.");if(R.defined(e[m][t].indices)!==o)throw new x.DeveloperError("All instance geometries must have an indices or not have one.");if(e[m][t].primitiveType!==s)throw new x.DeveloperError("All instance geometries must have the same primitiveType.")}var u,p,d,l=function(e,t){var r,i=e.length,a={},n=e[0][t].attributes;for(r in n)if(n.hasOwnProperty(r)&&R.defined(n[r])&&R.defined(n[r].values)){for(var o=n[r],s=o.values.length,u=!0,p=1;p<i;++p){var d=e[p][t].attributes[r];if(!R.defined(d)||o.componentDatatype!==d.componentDatatype||o.componentsPerAttribute!==d.componentsPerAttribute||o.normalize!==d.normalize){u=!1;break}s+=d.values.length}u&&(a[r]=new I.GeometryAttribute({componentDatatype:o.componentDatatype,componentsPerAttribute:o.componentsPerAttribute,normalize:o.normalize,values:P.ComponentDatatype.createTypedArray(o.componentDatatype,s)}))}return a}(e,t);for(r in l)if(l.hasOwnProperty(r))for(u=l[r].values,m=w=0;m<a;++m)for(d=(p=e[m][t].attributes[r].values).length,i=0;i<d;++i)u[w++]=p[i];if(o){for(var f=0,m=0;m<a;++m)f+=e[m][t].indices.length;var v=I.Geometry.computeNumberOfVertices(new I.Geometry({attributes:l,primitiveType:I.PrimitiveType.POINTS})),y=D.IndexDatatype.createTypedArray(v,f),c=0,h=0;for(m=0;m<a;++m){for(var C=e[m][t].indices,b=C.length,w=0;w<b;++w)y[c++]=h+C[w];h+=I.Geometry.computeNumberOfVertices(e[m][t])}v=y}var g=new q.Cartesian3,T=0;for(m=0;m<a;++m){if(A=e[m][t].boundingSphere,!R.defined(A)){g=void 0;break}q.Cartesian3.add(A.center,g,g)}if(R.defined(g))for(q.Cartesian3.divideByScalar(g,a,g),m=0;m<a;++m){var A=e[m][t].boundingSphere,E=q.Cartesian3.magnitude(q.Cartesian3.subtract(A.center,g,S))+A.radius;T<E&&(T=E)}return new I.Geometry({attributes:l,indices:v,primitiveType:s,boundingSphere:R.defined(g)?new L.BoundingSphere(g,T):void 0})}t.combineInstances=function(e){if(!R.defined(e)||e.length<1)throw new x.DeveloperError("instances is required and must have length greater than zero.");for(var t=[],r=[],i=e.length,a=0;a<i;++a){var n=e[a];R.defined(n.geometry)?t.push(n):R.defined(n.westHemisphereGeometry)&&R.defined(n.eastHemisphereGeometry)&&r.push(n)}var o=[];return 0<t.length&&o.push(c(t,"geometry")),0<r.length&&(o.push(c(r,"westHemisphereGeometry")),o.push(c(r,"eastHemisphereGeometry"))),o};var E=new q.Cartesian3,N=new q.Cartesian3,G=new q.Cartesian3,M=new q.Cartesian3;t.computeNormal=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");if(!R.defined(e.attributes.position)||!R.defined(e.attributes.position.values))throw new x.DeveloperError("geometry.attributes.position.values is required.");if(!R.defined(e.indices))throw new x.DeveloperError("geometry.indices is required.");if(e.indices.length<2||e.indices.length%3!=0)throw new x.DeveloperError("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==I.PrimitiveType.TRIANGLES)throw new x.DeveloperError("geometry.primitiveType must be PrimitiveType.TRIANGLES.");for(var t=e.indices,r=e.attributes,i=r.position.values,a=r.position.values.length/3,n=t.length,o=new Array(a),s=new Array(n/3),u=new Array(n),p=0;p<a;p++)o[p]={indexOffset:0,count:0,currentCount:0};var d=0;for(p=0;p<n;p+=3){var l=t[p],f=t[p+1],m=t[p+2],v=3*l,y=3*f,c=3*m;N.x=i[v],N.y=i[1+v],N.z=i[2+v],G.x=i[y],G.y=i[1+y],G.z=i[2+y],M.x=i[c],M.y=i[1+c],M.z=i[2+c],o[l].count++,o[f].count++,o[m].count++,q.Cartesian3.subtract(G,N,G),q.Cartesian3.subtract(M,N,M),s[d]=q.Cartesian3.cross(G,M,new q.Cartesian3),d++}var h,C=0;for(p=0;p<a;p++)o[p].indexOffset+=C,C+=o[p].count;for(p=d=0;p<n;p+=3)u[(h=o[t[p]]).indexOffset+h.currentCount]=d,h.currentCount++,u[(h=o[t[p+1]]).indexOffset+h.currentCount]=d,h.currentCount++,u[(h=o[t[p+2]]).indexOffset+h.currentCount]=d,h.currentCount++,d++;var b=new Float32Array(3*a);for(p=0;p<a;p++){var w=3*p;if(h=o[p],q.Cartesian3.clone(q.Cartesian3.ZERO,E),0<h.count){for(d=0;d<h.count;d++)q.Cartesian3.add(E,s[u[h.indexOffset+d]],E);q.Cartesian3.equalsEpsilon(q.Cartesian3.ZERO,E,O.CesiumMath.EPSILON10)&&q.Cartesian3.clone(s[u[h.indexOffset]],E)}q.Cartesian3.equalsEpsilon(q.Cartesian3.ZERO,E,O.CesiumMath.EPSILON10)&&(E.z=1),q.Cartesian3.normalize(E,E),b[w]=E.x,b[1+w]=E.y,b[2+w]=E.z}return e.attributes.normal=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:b}),e};var B=new q.Cartesian3,V=new q.Cartesian3,k=new q.Cartesian3;t.computeTangentAndBitangent=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");var t=e.attributes,r=e.indices;if(!R.defined(t.position)||!R.defined(t.position.values))throw new x.DeveloperError("geometry.attributes.position.values is required.");if(!R.defined(t.normal)||!R.defined(t.normal.values))throw new x.DeveloperError("geometry.attributes.normal.values is required.");if(!R.defined(t.st)||!R.defined(t.st.values))throw new x.DeveloperError("geometry.attributes.st.values is required.");if(!R.defined(r))throw new x.DeveloperError("geometry.indices is required.");if(r.length<2||r.length%3!=0)throw new x.DeveloperError("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==I.PrimitiveType.TRIANGLES)throw new x.DeveloperError("geometry.primitiveType must be PrimitiveType.TRIANGLES.");for(var i=e.attributes.position.values,a=e.attributes.normal.values,n=e.attributes.st.values,o=e.attributes.position.values.length/3,s=r.length,u=new Array(3*o),p=0;p<u.length;p++)u[p]=0;for(p=0;p<s;p+=3){var d,l=r[p],f=r[p+1],m=r[p+2],v=3*f,y=3*m,c=2*l,h=2*f,C=2*m,b=i[d=3*l],w=i[d+1],f=i[d+2],m=n[c],l=n[1+c],c=n[1+h]-l,l=n[1+C]-l,m=1/((n[h]-m)*l-(n[C]-m)*c),b=(l*(i[v]-b)-c*(i[y]-b))*m,w=(l*(i[v+1]-w)-c*(i[y+1]-w))*m,m=(l*(i[v+2]-f)-c*(i[y+2]-f))*m;u[d]+=b,u[d+1]+=w,u[d+2]+=m,u[v]+=b,u[v+1]+=w,u[v+2]+=m,u[y]+=b,u[y+1]+=w,u[y+2]+=m}var g=new Float32Array(3*o),T=new Float32Array(3*o);for(p=0;p<o;p++){v=(d=3*p)+1,y=d+2;var A=q.Cartesian3.fromArray(a,d,B),E=q.Cartesian3.fromArray(u,d,k),D=q.Cartesian3.dot(A,E);q.Cartesian3.multiplyByScalar(A,D,V),q.Cartesian3.normalize(q.Cartesian3.subtract(E,V,E),E),g[d]=E.x,g[v]=E.y,g[y]=E.z,q.Cartesian3.normalize(q.Cartesian3.cross(A,E,E),E),T[d]=E.x,T[v]=E.y,T[y]=E.z}return e.attributes.tangent=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:g}),e.attributes.bitangent=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:T}),e};var F=new q.Cartesian2,_=new q.Cartesian3,U=new q.Cartesian3,Y=new q.Cartesian3,Z=new q.Cartesian2;function h(e){switch(e.primitiveType){case I.PrimitiveType.TRIANGLE_FAN:return function(e){var t=I.Geometry.computeNumberOfVertices(e);if(t<3)throw new x.DeveloperError("The number of vertices must be at least three.");var r=D.IndexDatatype.createTypedArray(t,3*(t-2));r[0]=1,r[1]=0,r[2]=2;for(var i=3,a=3;a<t;++a)r[i++]=a-1,r[i++]=0,r[i++]=a;return e.indices=r,e.primitiveType=I.PrimitiveType.TRIANGLES,e}(e);case I.PrimitiveType.TRIANGLE_STRIP:return function(e){var t=I.Geometry.computeNumberOfVertices(e);if(t<3)throw new x.DeveloperError("The number of vertices must be at least 3.");var r=D.IndexDatatype.createTypedArray(t,3*(t-2));r[0]=0,r[1]=1,r[2]=2,3<t&&(r[3]=0,r[4]=2,r[5]=3);for(var i=6,a=3;a<t-1;a+=2)r[i++]=a,r[i++]=a-1,r[i++]=a+1,a+2<t&&(r[i++]=a,r[i++]=a+1,r[i++]=a+2);return e.indices=r,e.primitiveType=I.PrimitiveType.TRIANGLES,e}(e);case I.PrimitiveType.TRIANGLES:return function(e){if(R.defined(e.indices))return e;var t=I.Geometry.computeNumberOfVertices(e);if(t<3)throw new x.DeveloperError("The number of vertices must be at least three.");if(t%3!=0)throw new x.DeveloperError("The number of vertices must be a multiple of three.");for(var r=D.IndexDatatype.createTypedArray(t,t),i=0;i<t;++i)r[i]=i;return e.indices=r,e}(e);case I.PrimitiveType.LINE_STRIP:return function(e){var t=I.Geometry.computeNumberOfVertices(e);if(t<2)throw new x.DeveloperError("The number of vertices must be at least two.");var r=D.IndexDatatype.createTypedArray(t,2*(t-1));r[0]=0,r[1]=1;for(var i=2,a=2;a<t;++a)r[i++]=a-1,r[i++]=a;return e.indices=r,e.primitiveType=I.PrimitiveType.LINES,e}(e);case I.PrimitiveType.LINE_LOOP:return function(e){var t=I.Geometry.computeNumberOfVertices(e);if(t<2)throw new x.DeveloperError("The number of vertices must be at least two.");var r=D.IndexDatatype.createTypedArray(t,2*t);r[0]=0,r[1]=1;for(var i=2,a=2;a<t;++a)r[i++]=a-1,r[i++]=a;return r[i++]=t-1,r[i]=0,e.indices=r,e.primitiveType=I.PrimitiveType.LINES,e}(e);case I.PrimitiveType.LINES:return function(e){if(R.defined(e.indices))return e;var t=I.Geometry.computeNumberOfVertices(e);if(t<2)throw new x.DeveloperError("The number of vertices must be at least two.");if(t%2!=0)throw new x.DeveloperError("The number of vertices must be a multiple of 2.");for(var r=D.IndexDatatype.createTypedArray(t,t),i=0;i<t;++i)r[i]=i;return e.indices=r,e}(e)}return e}function C(e,t){Math.abs(e.y)<O.CesiumMath.EPSILON6&&(e.y=t?-O.CesiumMath.EPSILON6:O.CesiumMath.EPSILON6)}t.compressVertices=function(e){if(!R.defined(e))throw new x.DeveloperError("geometry is required.");var t=e.attributes.extrudeDirection;if(R.defined(t)){for(var r=t.values,i=r.length/3,a=new Float32Array(2*i),n=0,o=0;o<i;++o)q.Cartesian3.fromArray(r,3*o,_),q.Cartesian3.equals(_,q.Cartesian3.ZERO)?n+=2:(Z=g.AttributeCompression.octEncodeInRange(_,65535,Z),a[n++]=Z.x,a[n++]=Z.y);return e.attributes.compressedAttributes=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:a}),delete e.attributes.extrudeDirection,e}var s=e.attributes.normal,u=e.attributes.st,p=R.defined(s),d=R.defined(u);if(!p&&!d)return e;var l,f,m,v,y=e.attributes.tangent,t=e.attributes.bitangent,c=R.defined(y),h=R.defined(t);p&&(l=s.values),d&&(f=u.values),c&&(m=y.values),h&&(v=t.values);y=i=(p?l:f).length/(p?3:2),t=d&&p?2:1;y*=t+=c||h?1:0;var C=new Float32Array(y),b=0;for(o=0;o<i;++o){d&&(q.Cartesian2.fromArray(f,2*o,F),C[b++]=g.AttributeCompression.compressTextureCoordinates(F));var w=3*o;p&&R.defined(m)&&R.defined(v)?(q.Cartesian3.fromArray(l,w,_),q.Cartesian3.fromArray(m,w,U),q.Cartesian3.fromArray(v,w,Y),g.AttributeCompression.octPack(_,U,Y,F),C[b++]=F.x,C[b++]=F.y):(p&&(q.Cartesian3.fromArray(l,w,_),C[b++]=g.AttributeCompression.octEncodeFloat(_)),c&&(q.Cartesian3.fromArray(m,w,_),C[b++]=g.AttributeCompression.octEncodeFloat(_)),h&&(q.Cartesian3.fromArray(v,w,_),C[b++]=g.AttributeCompression.octEncodeFloat(_)))}return e.attributes.compressedAttributes=new I.GeometryAttribute({componentDatatype:P.ComponentDatatype.FLOAT,componentsPerAttribute:t,values:C}),p&&delete e.attributes.normal,d&&delete e.attributes.st,h&&delete e.attributes.bitangent,c&&delete e.attributes.tangent,e};var b=new q.Cartesian3;function H(e,t,r,i){q.Cartesian3.add(e,q.Cartesian3.multiplyByScalar(q.Cartesian3.subtract(t,e,b),e.y/(e.y-t.y),b),r),q.Cartesian3.clone(r,i),C(r,!0),C(i,!1)}var W=new q.Cartesian3,X=new q.Cartesian3,j=new q.Cartesian3,J=new q.Cartesian3,K={positions:new Array(7),indices:new Array(9)};function Q(e,t,r){if(!(0<=e.x||0<=t.x||0<=r.x)){!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y)return C(e,e.y<0),C(t,t.y<0),C(r,r.y<0);var i=Math.abs(e.y),a=Math.abs(t.y),n=Math.abs(r.y),a=a<i?n<i?O.CesiumMath.sign(e.y):O.CesiumMath.sign(r.y):n<a?O.CesiumMath.sign(t.y):O.CesiumMath.sign(r.y);C(e,a=a<0),C(t,a),C(r,a)}(e,t,r);var i=e.y<0,a=t.y<0,n=r.y<0,o=0;o+=i?1:0,o+=a?1:0;var s=K.indices;1==(o+=n?1:0)?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(H(e,t,W,j),H(e,r,X,J),s[0]=0,s[3]=1,s[4]=2,s[6]=1):a?(H(t,r,W,j),H(t,e,X,J),s[0]=1,s[3]=2,s[4]=0,s[6]=2):n&&(H(r,e,W,j),H(r,t,X,J),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2==o&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?a?n||(H(r,e,W,j),H(r,t,X,J),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(H(t,r,W,j),H(t,e,X,J),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(H(e,t,W,j),H(e,r,X,J),s[0]=1,s[1]=2,s[3]=1,s[6]=0));s=K.positions;return s[0]=e,s[1]=t,s[2]=r,s.length=3,1!=o&&2!=o||(s[3]=W,s[4]=X,s[5]=j,s[6]=J,s.length=7),K}}function $(e,t){var r=e.attributes;if(0!==r.position.values.length){for(var i in r)r.hasOwnProperty(i)&&R.defined(r[i])&&R.defined(r[i].values)&&((i=r[i]).values=P.ComponentDatatype.createTypedArray(i.componentDatatype,i.values));var a=I.Geometry.computeNumberOfVertices(e);return e.indices=D.IndexDatatype.createTypedArray(a,e.indices),t&&(e.boundingSphere=L.BoundingSphere.fromVertices(r.position.values)),e}}function ee(e){var t,r,i=e.attributes,a={};for(t in i)i.hasOwnProperty(t)&&R.defined(i[t])&&R.defined(i[t].values)&&(r=i[t],a[t]=new I.GeometryAttribute({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return new I.Geometry({attributes:a,indices:[],primitiveType:e.primitiveType})}function te(e,t,r){var i=R.defined(e.geometry.boundingSphere);t=$(t,i),r=$(r,i),R.defined(r)&&!R.defined(t)?e.geometry=r:!R.defined(r)&&R.defined(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=r,e.geometry=void 0)}function r(u,p){var d=new u,l=new u,f=new u;return function(e,t,r,i,a,n,o,s){e=u.fromArray(a,e*p,d),t=u.fromArray(a,t*p,l),r=u.fromArray(a,r*p,f);u.multiplyByScalar(e,i.x,e),u.multiplyByScalar(t,i.y,t),u.multiplyByScalar(r,i.z,r);e=u.add(e,t,e);u.add(e,r,e),s&&u.normalize(e,e),u.pack(e,n,o*p)}}var re=r(L.Cartesian4,4),ie=r(q.Cartesian3,3),ae=r(q.Cartesian2,2),ne=function(e,t,r,i,a,n,o){e=a[e]*i.x,t=a[t]*i.y,i=a[r]*i.z;n[o]=e+t+i>O.CesiumMath.EPSILON6?1:0},oe=new q.Cartesian3,se=new q.Cartesian3,ue=new q.Cartesian3,pe=new q.Cartesian3;function de(e,t,r,i,a,n,o,s,u,p,d,l,f,m,v,y){if(R.defined(n)||R.defined(o)||R.defined(s)||R.defined(u)||R.defined(p)||0!==m){var c,h=function(e,t,r,i,a){var n,o,s,u,p,d,l;if(x.Check.defined("point",e),x.Check.defined("p0",t),x.Check.defined("p1",r),x.Check.defined("p2",i),R.defined(a)||(a=new q.Cartesian3),R.defined(t.z)){if(q.Cartesian3.equalsEpsilon(e,t,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_X,a);if(q.Cartesian3.equalsEpsilon(e,r,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_Y,a);if(q.Cartesian3.equalsEpsilon(e,i,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_Z,a);n=q.Cartesian3.subtract(r,t,w),o=q.Cartesian3.subtract(i,t,T),s=q.Cartesian3.subtract(e,t,A),u=q.Cartesian3.dot(n,n),f=q.Cartesian3.dot(n,o),p=q.Cartesian3.dot(n,s),d=q.Cartesian3.dot(o,o),l=q.Cartesian3.dot(o,s)}else{if(q.Cartesian2.equalsEpsilon(e,t,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_X,a);if(q.Cartesian2.equalsEpsilon(e,r,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_Y,a);if(q.Cartesian2.equalsEpsilon(e,i,O.CesiumMath.EPSILON14))return q.Cartesian3.clone(q.Cartesian3.UNIT_Z,a);n=q.Cartesian2.subtract(r,t,w),o=q.Cartesian2.subtract(i,t,T),s=q.Cartesian2.subtract(e,t,A),u=q.Cartesian2.dot(n,n),f=q.Cartesian2.dot(n,o),p=q.Cartesian2.dot(n,s),d=q.Cartesian2.dot(o,o),l=q.Cartesian2.dot(o,s)}a.y=d*p-f*l,a.z=u*l-f*p;var f=u*d-f*f;return 0!==a.y&&(a.y/=f),0!==a.z&&(a.z/=f),a.x=1-a.y-a.z,a}(i,q.Cartesian3.fromArray(a,3*e,oe),q.Cartesian3.fromArray(a,3*t,se),q.Cartesian3.fromArray(a,3*r,ue),pe);if(R.defined(n)&&ie(e,t,r,h,n,l.normal.values,y,!0),R.defined(p)&&(a=q.Cartesian3.fromArray(p,3*e,oe),n=q.Cartesian3.fromArray(p,3*t,se),p=q.Cartesian3.fromArray(p,3*r,ue),q.Cartesian3.multiplyByScalar(a,h.x,a),q.Cartesian3.multiplyByScalar(n,h.y,n),q.Cartesian3.multiplyByScalar(p,h.z,p),q.Cartesian3.equals(a,q.Cartesian3.ZERO)&&q.Cartesian3.equals(n,q.Cartesian3.ZERO)&&q.Cartesian3.equals(p,q.Cartesian3.ZERO)?((c=oe).x=0,c.y=0,c.z=0):(c=q.Cartesian3.add(a,n,a),q.Cartesian3.add(c,p,c),q.Cartesian3.normalize(c,c)),q.Cartesian3.pack(c,l.extrudeDirection.values,3*y)),R.defined(d)&&ne(e,t,r,h,d,l.applyOffset.values,y),R.defined(o)&&ie(e,t,r,h,o,l.tangent.values,y,!0),R.defined(s)&&ie(e,t,r,h,s,l.bitangent.values,y,!0),R.defined(u)&&ae(e,t,r,h,u,l.st.values,y),0<m)for(var C=0;C<m;C++){var b=f[C];!function(e,t,r,i,a,n,o){var s=n.componentsPerAttribute,u=n.values,p=o.values;switch(s){case 4:re(e,t,r,i,u,p,a,!1);break;case 3:ie(e,t,r,i,u,p,a,!1);break;case 2:ae(e,t,r,i,u,p,a,!1);break;default:p[a]=u[e]*i.x+u[t]*i.y+u[r]*i.z}}(e,t,r,h,y,v[b],l[b])}}}function le(e,t,r,i,a,n){var o=e.position.values.length/3;if(-1===a)return e.position.values.push(n.x,n.y,n.z),t.push(o),o;i=i[a],a=r[i];return-1===a?(r[i]=o,e.position.values.push(n.x,n.y,n.z),t.push(o),o):(t.push(a),a)}var fe={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function me(e){var t,r=e.geometry,i=r.attributes,a=i.position.values,n=R.defined(i.normal)?i.normal.values:void 0,o=R.defined(i.bitangent)?i.bitangent.values:void 0,s=R.defined(i.tangent)?i.tangent.values:void 0,u=R.defined(i.st)?i.st.values:void 0,p=R.defined(i.extrudeDirection)?i.extrudeDirection.values:void 0,d=R.defined(i.applyOffset)?i.applyOffset.values:void 0,l=r.indices,f=[];for(t in i)i.hasOwnProperty(t)&&!fe[t]&&R.defined(i[t])&&f.push(t);var m,v,y=f.length,c=ee(r),h=ee(r),C=[];C.length=a.length/3;var b=[];for(b.length=a.length/3,g=0;g<C.length;++g)C[g]=-1,b[g]=-1;for(var w=l.length,g=0;g<w;g+=3){var T=l[g],A=l[g+1],E=l[g+2],D=q.Cartesian3.fromArray(a,3*T),x=q.Cartesian3.fromArray(a,3*A),P=q.Cartesian3.fromArray(a,3*E),I=Q(D,x,P);if(R.defined(I)&&3<I.positions.length)for(var S=I.positions,N=I.indices,O=N.length,L=0;L<O;++L){var z=N[L],G=S[z],M=G.y<0?(m=h.attributes,v=h.indices,C):(m=c.attributes,v=c.indices,b);de(T,A,E,G,a,n,s,o,u,p,d,m,f,y,i,le(m,v,M,l,z<3?g+z:-1,G))}else R.defined(I)&&(D=I.positions[0],x=I.positions[1],P=I.positions[2]),M=D.y<0?(m=h.attributes,v=h.indices,C):(m=c.attributes,v=c.indices,b),de(T,A,E,D,a,n,s,o,u,p,d,m,f,y,i,le(m,v,M,l,g,D)),de(T,A,E,x,a,n,s,o,u,p,d,m,f,y,i,le(m,v,M,l,g+1,x)),de(T,A,E,P,a,n,s,o,u,p,d,m,f,y,i,le(m,v,M,l,g+2,P))}te(e,h,c)}var ve=i.Plane.fromPointNormal(q.Cartesian3.ZERO,q.Cartesian3.UNIT_Y),ye=new q.Cartesian3,ce=new q.Cartesian3;function he(e,t,r,i,a,n,o){R.defined(o)&&(i=q.Cartesian3.fromArray(i,3*e,oe),q.Cartesian3.equalsEpsilon(i,r,O.CesiumMath.EPSILON10)?n.applyOffset.values[a]=o[e]:n.applyOffset.values[a]=o[t])}function Ce(e){var t,r=e.geometry,i=r.attributes,a=i.position.values,n=R.defined(i.applyOffset)?i.applyOffset.values:void 0,o=r.indices,s=ee(r),u=ee(r),p=o.length,d=[];d.length=a.length/3;var l=[];for(l.length=a.length/3,t=0;t<d.length;++t)d[t]=-1,l[t]=-1;for(t=0;t<p;t+=2){var f=o[t],m=o[t+1],v=q.Cartesian3.fromArray(a,3*f,oe),y=q.Cartesian3.fromArray(a,3*m,se);Math.abs(v.y)<O.CesiumMath.EPSILON6&&(v.y<0?v.y=-O.CesiumMath.EPSILON6:v.y=O.CesiumMath.EPSILON6),Math.abs(y.y)<O.CesiumMath.EPSILON6&&(y.y<0?y.y=-O.CesiumMath.EPSILON6:y.y=O.CesiumMath.EPSILON6);var c,h,C,b,w=s.attributes,g=s.indices,T=l,A=u.attributes,E=u.indices,D=d,x=z.IntersectionTests.lineSegmentPlane(v,y,ve,ue);R.defined(x)?(c=q.Cartesian3.multiplyByScalar(q.Cartesian3.UNIT_Y,5*O.CesiumMath.EPSILON9,ye),v.y<0&&(q.Cartesian3.negate(c,c),w=u.attributes,g=u.indices,T=d,A=s.attributes,E=s.indices,D=l),h=q.Cartesian3.add(x,c,ce),he(f,m,v,a,le(w,g,T,o,t,v),w,n),he(f,m,h,a,le(w,g,T,o,-1,h),w,n),q.Cartesian3.negate(c,c),q.Cartesian3.add(x,c,h),he(f,m,h,a,le(A,E,D,o,-1,h),A,n),he(f,m,y,a,le(A,E,D,o,t+1,y),A,n)):(A=v.y<0?(C=u.attributes,b=u.indices,d):(C=s.attributes,b=s.indices,l),he(f,m,v,a,le(C,b,A,o,t,v),C,n),he(f,m,y,a,le(C,b,A,o,t+1,y),C,n))}te(e,u,s)}var be=new q.Cartesian2,we=new q.Cartesian2,ge=new q.Cartesian3,Te=new q.Cartesian3,Ae=new q.Cartesian3,Ee=new q.Cartesian3,De=new q.Cartesian3,xe=new q.Cartesian3,Pe=new L.Cartesian4;function Ie(e){for(var e=e.attributes,t=e.position.values,r=e.prevPosition.values,i=e.nextPosition.values,a=t.length,n=0;n<a;n+=3){var o,s=q.Cartesian3.unpack(t,n,ge);0<s.x||(o=q.Cartesian3.unpack(r,n,Te),(s.y<0&&0<o.y||0<s.y&&o.y<0)&&(0<n-3?(r[n]=t[n-3],r[n+1]=t[n-2],r[n+2]=t[n-1]):q.Cartesian3.pack(s,r,n)),o=q.Cartesian3.unpack(i,n,Ae),(s.y<0&&0<o.y||0<s.y&&o.y<0)&&(n+3<a?(i[n]=t[n+3],i[n+1]=t[n+4],i[n+2]=t[n+5]):q.Cartesian3.pack(s,i,n)))}}var Se=5*O.CesiumMath.EPSILON9,Ne=O.CesiumMath.EPSILON6;t.splitLongitude=function(e){if(!R.defined(e))throw new x.DeveloperError("instance is required.");var t=e.geometry,r=t.boundingSphere;if(R.defined(r)&&(0<r.center.x-r.radius||L.BoundingSphere.intersectPlane(r,i.Plane.ORIGIN_ZX_PLANE)!==L.Intersect.INTERSECTING))return e;if(t.geometryType!==I.GeometryType.NONE)switch(t.geometryType){case I.GeometryType.POLYLINES:!function(e){for(var t=e.geometry,r=t.attributes,i=r.position.values,a=r.prevPosition.values,n=r.nextPosition.values,o=r.expandAndWidth.values,s=R.defined(r.st)?r.st.values:void 0,u=R.defined(r.color)?r.color.values:void 0,p=ee(t),d=ee(t),l=!1,f=i.length/3,m=0;m<f;m+=4){var v=m,y=m+2,c=q.Cartesian3.fromArray(i,3*v,ge),h=q.Cartesian3.fromArray(i,3*y,Te);if(Math.abs(c.y)<Ne)for(c.y=Ne*(h.y<0?-1:1),i[3*m+1]=c.y,i[3*(m+1)+1]=c.y,I=3*v;I<3*v+12;I+=3)a[I]=i[3*m],a[I+1]=i[3*m+1],a[I+2]=i[3*m+2];if(Math.abs(h.y)<Ne)for(h.y=Ne*(c.y<0?-1:1),i[3*(m+2)+1]=h.y,i[3*(m+3)+1]=h.y,I=3*v;I<3*v+12;I+=3)n[I]=i[3*(m+2)],n[I+1]=i[3*(m+2)+1],n[I+2]=i[3*(m+2)+2];var C=p.attributes,b=p.indices,w=d.attributes,g=d.indices,T=z.IntersectionTests.lineSegmentPlane(c,h,ve,Ee);if(R.defined(T)){var l=!0,A=q.Cartesian3.multiplyByScalar(q.Cartesian3.UNIT_Y,Se,De);c.y<0&&(q.Cartesian3.negate(A,A),C=d.attributes,b=d.indices,w=p.attributes,g=p.indices);var E=q.Cartesian3.add(T,A,xe);C.position.values.push(c.x,c.y,c.z,c.x,c.y,c.z),C.position.values.push(E.x,E.y,E.z),C.position.values.push(E.x,E.y,E.z),C.prevPosition.values.push(a[3*v],a[3*v+1],a[3*v+2]),C.prevPosition.values.push(a[3*v+3],a[3*v+4],a[3*v+5]),C.prevPosition.values.push(c.x,c.y,c.z,c.x,c.y,c.z),C.nextPosition.values.push(E.x,E.y,E.z),C.nextPosition.values.push(E.x,E.y,E.z),C.nextPosition.values.push(E.x,E.y,E.z),C.nextPosition.values.push(E.x,E.y,E.z),q.Cartesian3.negate(A,A),q.Cartesian3.add(T,A,E),w.position.values.push(E.x,E.y,E.z),w.position.values.push(E.x,E.y,E.z),w.position.values.push(h.x,h.y,h.z,h.x,h.y,h.z),w.prevPosition.values.push(E.x,E.y,E.z),w.prevPosition.values.push(E.x,E.y,E.z),w.prevPosition.values.push(E.x,E.y,E.z),w.prevPosition.values.push(E.x,E.y,E.z),w.nextPosition.values.push(h.x,h.y,h.z,h.x,h.y,h.z),w.nextPosition.values.push(n[3*y],n[3*y+1],n[3*y+2]),w.nextPosition.values.push(n[3*y+3],n[3*y+4],n[3*y+5]);var D=q.Cartesian2.fromArray(o,2*v,be),x=Math.abs(D.y);C.expandAndWidth.values.push(-1,x,1,x),C.expandAndWidth.values.push(-1,-x,1,-x),w.expandAndWidth.values.push(-1,x,1,x),w.expandAndWidth.values.push(-1,-x,1,-x);A=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(T,c,Ae));if(A/=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(h,c,Ae)),R.defined(u)){for(var E=L.Cartesian4.fromArray(u,4*v,Pe),P=L.Cartesian4.fromArray(u,4*y,Pe),D=O.CesiumMath.lerp(E.x,P.x,A),x=O.CesiumMath.lerp(E.y,P.y,A),T=O.CesiumMath.lerp(E.z,P.z,A),P=O.CesiumMath.lerp(E.w,P.w,A),I=4*v;I<4*v+8;++I)C.color.values.push(u[I]);for(C.color.values.push(D,x,T,P),C.color.values.push(D,x,T,P),w.color.values.push(D,x,T,P),w.color.values.push(D,x,T,P),I=4*y;I<4*y+8;++I)w.color.values.push(u[I])}if(R.defined(s)){var P=q.Cartesian2.fromArray(s,2*v,be),S=q.Cartesian2.fromArray(s,2*(m+3),we),A=O.CesiumMath.lerp(P.x,S.x,A);for(I=2*v;I<2*v+4;++I)C.st.values.push(s[I]);for(C.st.values.push(A,P.y),C.st.values.push(A,S.y),w.st.values.push(A,P.y),w.st.values.push(A,S.y),I=2*y;I<2*y+4;++I)w.st.values.push(s[I])}S=C.position.values.length/3-4,b.push(S,S+2,S+1),b.push(S+1,S+2,S+3),S=w.position.values.length/3-4,g.push(S,S+2,S+1),g.push(S+1,S+2,S+3)}else{var N,g=c.y<0?(N=d.attributes,d.indices):(N=p.attributes,p.indices);for(N.position.values.push(c.x,c.y,c.z),N.position.values.push(c.x,c.y,c.z),N.position.values.push(h.x,h.y,h.z),N.position.values.push(h.x,h.y,h.z),I=3*m;I<3*m+12;++I)N.prevPosition.values.push(a[I]),N.nextPosition.values.push(n[I]);for(I=2*m;I<2*m+8;++I)N.expandAndWidth.values.push(o[I]),R.defined(s)&&N.st.values.push(s[I]);if(R.defined(u))for(I=4*m;I<4*m+16;++I)N.color.values.push(u[I]);S=N.position.values.length/3-4,g.push(S,S+2,S+1),g.push(S+1,S+2,S+3)}}l&&(Ie(d),Ie(p)),te(e,d,p)}(e);break;case I.GeometryType.TRIANGLES:me(e);break;case I.GeometryType.LINES:Ce(e)}else h(t),t.primitiveType===I.PrimitiveType.TRIANGLES?me(e):t.primitiveType===I.PrimitiveType.LINES&&Ce(e);return e},e.GeometryPipeline=t});
//# sourceMappingURL=GeometryPipeline-aac4ecee.js.map
